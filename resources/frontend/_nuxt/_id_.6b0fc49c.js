import{i as Wt,a as Dt,S as D,I as zt,l as $t,_ as It}from"./layout-sidebar.vue.39468dad.js";import{d as Z,x as H,y as We,z as Ot,o as S,h as $,a as E,v as oe,A as Nt,t as j,j as Q,s as te,F as ht,g as V,B as Ut,i as L,w as z,f as I,u as x,r as Gt,c as re,C as Bt,D as ue,E as Vt,p as ct,e as dt,k as Kt,l as Qt,m as qt,n as Ne}from"./entry.6dfe3f3c.js";import{u as Zt}from"./fetch.34eddd7f.js";import{P as jt}from"./page-header.c190c3eb.js";import{S as ut,u as Jt}from"./use-profiler.580ccb3a.js";import{P as Ue,W as ei}from"./vue3-tabs-component.647caf6a.js";import{u as ti}from"./use-formats.c79ce0bd.js";import{_ as B}from"./_plugin-vue_export-helper.c27b6911.js";var T=(t=>(t.CPU="cpu",t.MEMORY_CHANGE="pmu",t.MEMORY="mu",t.CALLS="calls",t))(T||{});const{formatDuration:ve,formatFileSize:me}=ti(),ii=t=>t<=1?"#fff":t<=10?"#7BC8F6":t<=25?"#4DA6FF":t<=50?"#1A8FFF":t<=75?"#007FFF":t<=100?"#0059B3":t<=250?"#FFD700":t<=500?"#FFA500":t<=750?"#FF8C00":t<=1e3?"#FF4500":t<=2500?"#FF0000":"#8B0000",si=t=>t<=10?"#FFFFFF":t<=20?"#f19797":t<=30?"#d93939":t<=40?"#ad1e1e":t<=50?"#982525":t<=60?"#862323":t<=70?"#671d1d":t<=80?"#540d0d":t<=90?"#340707":"#2d0606",ni=t=>{const e=t.replace("#",""),i=parseInt(e.substr(0,2),16),s=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16);return(i*299+s*587+n*114)/1e3>=128?"#000":"#fff"},ri=(t,e)=>{var s;const i={p_mu:n=>`${n}%`,p_pmu:n=>`${n}%`,p_cpu:n=>`${n}%`,p_wt:n=>`${n}%`,mu:me,d_mu:me,pmu:me,d_pmu:me,cpu:ve,d_cpu:ve,wt:ve,d_wt:ve};return((s=i[e])==null?void 0:s.call(i,t))||t},oi=(t,e,i=1,s=10)=>Object.values(t).reduce((n,r,o)=>{let a="#fff",l="#000",h="#fff",c=r.cost.ct>1?`${r.cost.ct}x`:"";if(e===T.CALLS){const u="ct";if(!(r.cost[u]>=s))return n;a=ii(r.cost[u])}else{const u=`p_${e}`,b=r.cost[u]>=s;if(!b&&r.cost[u]<=i)return n;a=b?si(r.cost[u]):"#fff",l=b?ni(a):"#000",h=a;const y=r.cost.ct>1?` [ ${r.cost.ct}x ]`:"";c=`${ri(r.cost[u],u)}${y}`}const d=`p_${e}`;if(!(r.cost.p_pmu>10)&&r.cost[d]<=i)return n;n.nodes.push({data:{id:r.callee,name:r.callee,cost:r.cost,color:a,textColor:l}});const v=n.nodes.find(u=>u.data.id===r.caller);return o>0&&v&&n.edges.push({data:{source:r.caller||"",target:r.callee,color:h,label:c,weight:r.cost.ct}}),n},{nodes:[],edges:[]}),ai=()=>({initialize:Wt,buildData:oi}),{buildData:li,initialize:hi}=ai(),gt=()=>({prepare:li,initialize:hi}),ci={key:0},di={class:"render-graph__tooltip-title"},ui=Z({__name:"render-graph",props:{elements:{},height:{}},setup(t){const e=t,i=H(),s=H(),n=H(),r=H(),o=H(),a=H(),l=(c,d)=>{if(!c||!d){i.value=void 0,s.value=void 0;return}i.value=c.data();const f=d.offsetX,v=d.offsetY,{clientHeight:u=0,clientWidth:b=0}=a.value,{offsetHeight:y=0,offsetWidth:m=0}=o.value;let g=v,w=f;if(b+f>m-80){const F=b+f-m+100;w-=F}u+v>y&&(g=v-u),s.value={top:`${g+20}px`,left:`${w}px`}},{initialize:h}=gt();return We(()=>{n.value=h({container:r.value,elements:e.elements,onNodeHover:l})}),Ot(()=>{n.value()}),(c,d)=>(S(),$(ht,null,[E("div",{ref_key:"parent",ref:o,class:"render-graph",style:oe({height:`${c.height}px`})},[E("div",{ref_key:"renderer",ref:r,class:"render-graph__in"},null,512)],4),E("div",{ref_key:"tooltip",ref:a,class:te(["render-graph__tooltip",{"render-graph__tooltip--active":i.value}]),style:oe(s.value)},[i.value?(S(),$("div",ci,[Nt(c.$slots,"default",{data:i.value},()=>[E("h4",di,j(i.value),1)],!0)])):Q("",!0)],6)],64))}}),gi=B(ui,[["__scopeId","data-v-18d9d055"]]),Se=B(Dt,[["__scopeId","data-v-3d8f9a51"]]),fi={class:"call-stack-row__usage"},pi={class:"call-stack-row__usage-title"},vi={class:"call-stack-row__calls"},mi=Z({__name:"call-stack-row",props:{edge:{}},emits:["hover","hide"],setup(t,{emit:e}){const i=t,s=(a,l)=>{e("hover",{callee:l.callee,cost:l.cost,caller:l.caller,position:{x:a.pageX,y:a.pageY}})},n=a=>Math.min(100,Math.max(0,a)),r=V(()=>({width:`${n(i.edge.cost.p_cpu)}%`})),o=V(()=>({width:`${n(i.edge.cost.p_mu)}%`}));return(a,l)=>(S(),$("div",{class:"call-stack-row",onMouseover:l[0]||(l[0]=h=>s(h,a.edge)),onMouseout:l[1]||(l[1]=h=>a.$emit("hide"))},[E("div",fi,[E("div",{class:"call-stack-row__usage-cpu",style:oe(r.value)},null,4),E("div",{class:"call-stack-row__usage-memory",style:oe(o.value)},null,4),E("div",pi,j(a.edge.cost.p_cpu)+"% / "+j(a.edge.cost.p_mu)+"% ",1)]),E("div",vi,j(a.edge.cost.ct),1)],32))}});const bi=B(mi,[["__scopeId","data-v-dd67eb49"]]),yi={class:"call-stack"},Ei={class:"call-stack__header"},xi={class:"call-stack__header-cpu"},wi={class:"call-stack__header-calls"},Ci={class:"call-stack__calls"},Ri=Z({__name:"call-stack",props:{payload:{}},emits:["hover","hide"],setup(t){const e=t,i=Ut({CPU:D.ASC,memory:D.DEFAULT,calls:D.DEFAULT}),s=V(()=>Object.entries(e.payload.edges).sort(([,r],[,o])=>i.CPU===D.ASC?o.cost.p_cpu-r.cost.p_cpu:i.CPU===D.DESC?r.cost.p_cpu-o.cost.p_cpu:i.memory===D.ASC?o.cost.p_mu-r.cost.p_mu:i.memory===D.DESC?r.cost.p_mu-o.cost.p_mu:i.calls===D.ASC?o.cost.ct-r.cost.ct:i.calls===D.DESC?r.cost.ct-o.cost.ct:0).reduce((r,[o,a])=>({...r,[o]:a}),{})),n=r=>o=>{Object.keys(i).forEach(a=>{const l=a;l!==r?i[l]=D.DEFAULT:i[l]=o===D.DEFAULT?D.ASC:o})};return(r,o)=>(S(),$("div",yi,[E("header",Ei,[E("div",xi,[L(x(Se),{sort:i.CPU,onChangeSort:o[0]||(o[0]=a=>n("CPU")(a))},{default:z(()=>[I(" CPU ")]),_:1},8,["sort"]),I(" / "),L(x(Se),{sort:i.memory,onChangeSort:o[1]||(o[1]=a=>n("memory")(a))},{default:z(()=>[I(" memory ")]),_:1},8,["sort"])]),E("div",wi,[L(x(Se),{sort:i.calls,onChangeSort:o[2]||(o[2]=a=>n("calls")(a))},{default:z(()=>[I(" Calls ")]),_:1},8,["sort"])])]),E("div",Ci,[(S(!0),$(ht,null,Gt(s.value,(a,l)=>(S(),re(x(bi),{key:l,edge:a,onHover:o[3]||(o[3]=h=>r.$emit("hover",h)),onHide:o[4]||(o[4]=h=>r.$emit("hide"))},null,8,["edge"]))),128))])]))}});const _i=B(Ri,[["__scopeId","data-v-61e82c9d"]]),Mi={class:"call-stat-board"},ki={class:"call-stat-board__title"},Si=Z({__name:"call-stat-board",props:{edge:{}},setup(t){return(e,i)=>(S(),$("div",Mi,[E("h4",ki,j(e.edge.callee),1),L(x(ut),{class:"call-stat-board__body",cost:e.edge.cost},null,8,["cost"])]))}});const ft=B(Si,[["__scopeId","data-v-953c43ba"]]),Ti={class:"call-graph__toolbar"},Pi={class:"call-graph__toolbar call-graph__toolbar--right"},Hi={key:0,class:"call-graph__toolbar-input-wr"},Fi=["value"],Li={class:"call-graph__toolbar-input-wr"},Xi=["value","min","max","step"],Ai=Z({__name:"call-graph",props:{payload:{}},setup(t){const e=t,{prepare:i}=gt(),s=H(!1),n=H(T.CPU),r=H(1),o=H(10),a=H(!1),l=H(),h=V(()=>i(e.payload.edges,n.value,r.value,o.value)),c=V(()=>n.value===T.CALLS?"Min calls":"Percent"),d=V(()=>`${n.value}-${r.value}-${o.value}`),f=V(()=>s.value?window.innerHeight:l.value.offsetHeight);We(()=>{a.value=!0});const v=y=>{n.value=y},u=y=>{r.value=y},b=y=>{o.value=y};return(y,m)=>(S(),$("div",{ref_key:"container",ref:l,class:te(["call-graph",{"call-graph--fullscreen":s.value}])},[a.value&&d.value?(S(),re(x(gi),{key:d.value,class:"call-graph__graph",elements:h.value,height:f.value},{default:z(({data:{name:g,cost:w}})=>[L(x(ft),{edge:{callee:g,caller:"",cost:w}},null,8,["edge"])]),_:1},8,["elements","height"])):Q("",!0),E("div",Ti,[E("button",{title:"Full screen",onClick:m[0]||(m[0]=g=>s.value=!s.value)},[L(x(zt),{name:"fullscreen",class:"call-graph__toolbar-icon"})]),E("button",{class:te(["call-graph__toolbar-action",{"call-graph__toolbar-action--active":n.value===x(T).CPU}]),onClick:m[1]||(m[1]=g=>v(x(T).CPU))}," CPU ",2),E("button",{class:te(["call-graph__toolbar-action",{"call-graph__toolbar-action--active":n.value===x(T).MEMORY_CHANGE}]),onClick:m[2]||(m[2]=g=>v(x(T).MEMORY_CHANGE))}," Memory change ",2),E("button",{class:te(["call-graph__toolbar-action",{"call-graph__toolbar-action--active":n.value===x(T).MEMORY}]),onClick:m[3]||(m[3]=g=>v(x(T).MEMORY))}," Memory usage ",2),E("button",{class:te(["call-graph__toolbar-action",{"call-graph__toolbar-action--active":n.value===x(T).CALLS}]),onClick:m[4]||(m[4]=g=>v(x(T).CALLS))}," Calls ",2)]),E("div",Pi,[n.value!==x(T).CALLS?(S(),$("label",Hi,[I(" Threshold "),E("input",{class:"call-graph__toolbar-input",type:"number",value:r.value,min:0,max:10,step:.1,onInput:m[5]||(m[5]=g=>u(g.target.value))},null,40,Fi)])):Q("",!0),E("label",Li,[I(j(c.value)+" ",1),E("input",{class:"call-graph__toolbar-input",type:"number",value:o.value,min:n.value===x(T).CALLS?1:0,max:n.value===x(T).CALLS?1e3:100,step:n.value===x(T).CALLS?10:5,onInput:m[6]||(m[6]=g=>b(g.target.value))},null,40,Xi)])])],2))}});const Yi=B(Ai,[["__scopeId","data-v-92c5b43a"]]);/*!
 * perfect-scrollbar v1.5.3
 * Copyright 2021 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function O(t){return getComputedStyle(t)}function A(t,e){for(var i in e){var s=e[i];typeof s=="number"&&(s=s+"px"),t.style[i]=s}return t}function be(t){var e=document.createElement("div");return e.className=t,e}var Ge=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function K(t,e){if(!Ge)throw new Error("No element matching method supported");return Ge.call(t,e)}function ne(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function Be(t,e){return Array.prototype.filter.call(t.children,function(i){return K(i,e)})}var M={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},pt={x:null,y:null};function vt(t,e){var i=t.element.classList,s=M.state.scrolling(e);i.contains(s)?clearTimeout(pt[e]):i.add(s)}function mt(t,e){pt[e]=setTimeout(function(){return t.isAlive&&t.element.classList.remove(M.state.scrolling(e))},t.settings.scrollingThreshold)}function Wi(t,e){vt(t,e),mt(t,e)}var ge=function(e){this.element=e,this.handlers={}},bt={isEmpty:{configurable:!0}};ge.prototype.bind=function(e,i){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(i),this.element.addEventListener(e,i,!1)};ge.prototype.unbind=function(e,i){var s=this;this.handlers[e]=this.handlers[e].filter(function(n){return i&&n!==i?!0:(s.element.removeEventListener(e,n,!1),!1)})};ge.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};bt.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every(function(e){return t.handlers[e].length===0})};Object.defineProperties(ge.prototype,bt);var ae=function(){this.eventElements=[]};ae.prototype.eventElement=function(e){var i=this.eventElements.filter(function(s){return s.element===e})[0];return i||(i=new ge(e),this.eventElements.push(i)),i};ae.prototype.bind=function(e,i,s){this.eventElement(e).bind(i,s)};ae.prototype.unbind=function(e,i,s){var n=this.eventElement(e);n.unbind(i,s),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)};ae.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]};ae.prototype.once=function(e,i,s){var n=this.eventElement(e),r=function(o){n.unbind(i,r),s(o)};n.bind(i,r)};function ye(t){if(typeof window.CustomEvent=="function")return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function Ce(t,e,i,s,n){s===void 0&&(s=!0),n===void 0&&(n=!1);var r;if(e==="top")r=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(e==="left")r=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");Di(t,i,r,s,n)}function Di(t,e,i,s,n){var r=i[0],o=i[1],a=i[2],l=i[3],h=i[4],c=i[5];s===void 0&&(s=!0),n===void 0&&(n=!1);var d=t.element;t.reach[l]=null,d[a]<1&&(t.reach[l]="start"),d[a]>t[r]-t[o]-1&&(t.reach[l]="end"),e&&(d.dispatchEvent(ye("ps-scroll-"+l)),e<0?d.dispatchEvent(ye("ps-scroll-"+h)):e>0&&d.dispatchEvent(ye("ps-scroll-"+c)),s&&Wi(t,l)),t.reach[l]&&(e||n)&&d.dispatchEvent(ye("ps-"+l+"-reach-"+t.reach[l]))}function C(t){return parseInt(t,10)||0}function zi(t){return K(t,"input,[contenteditable]")||K(t,"select,[contenteditable]")||K(t,"textarea,[contenteditable]")||K(t,"button,[contenteditable]")}function $i(t){var e=O(t);return C(e.width)+C(e.paddingLeft)+C(e.paddingRight)+C(e.borderLeftWidth)+C(e.borderRightWidth)}var ie={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function U(t){var e=t.element,i=Math.floor(e.scrollTop),s=e.getBoundingClientRect();t.containerWidth=Math.round(s.width),t.containerHeight=Math.round(s.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(Be(e,M.element.rail("x")).forEach(function(n){return ne(n)}),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(Be(e,M.element.rail("y")).forEach(function(n){return ne(n)}),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=Ve(t,C(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=C((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=Ve(t,C(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=C(i*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),Ii(e,t),t.scrollbarXActive?e.classList.add(M.state.active("x")):(e.classList.remove(M.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=t.isRtl===!0?t.contentWidth:0),t.scrollbarYActive?e.classList.add(M.state.active("y")):(e.classList.remove(M.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function Ve(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function Ii(t,e){var i={width:e.railXWidth},s=Math.floor(t.scrollTop);e.isRtl?i.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:i.left=t.scrollLeft,e.isScrollbarXUsingBottom?i.bottom=e.scrollbarXBottom-s:i.top=e.scrollbarXTop+s,A(e.scrollbarXRail,i);var n={top:s,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?n.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:n.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth*2-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:n.left=e.scrollbarYLeft+t.scrollLeft,A(e.scrollbarYRail,n),A(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),A(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function Oi(t){t.element,t.event.bind(t.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarYRail,"mousedown",function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,s=i>t.scrollbarYTop?1:-1;t.element.scrollTop+=s*t.containerHeight,U(t),e.stopPropagation()}),t.event.bind(t.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),t.event.bind(t.scrollbarXRail,"mousedown",function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,s=i>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=s*t.containerWidth,U(t),e.stopPropagation()})}function Ni(t){Ke(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),Ke(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function Ke(t,e){var i=e[0],s=e[1],n=e[2],r=e[3],o=e[4],a=e[5],l=e[6],h=e[7],c=e[8],d=t.element,f=null,v=null,u=null;function b(g){g.touches&&g.touches[0]&&(g[n]=g.touches[0].pageY),d[l]=f+u*(g[n]-v),vt(t,h),U(t),g.stopPropagation(),g.type.startsWith("touch")&&g.changedTouches.length>1&&g.preventDefault()}function y(){mt(t,h),t[c].classList.remove(M.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",b)}function m(g,w){f=d[l],w&&g.touches&&(g[n]=g.touches[0].pageY),v=g[n],u=(t[s]-t[i])/(t[r]-t[a]),w?t.event.bind(t.ownerDocument,"touchmove",b):(t.event.bind(t.ownerDocument,"mousemove",b),t.event.once(t.ownerDocument,"mouseup",y),g.preventDefault()),t[c].classList.add(M.state.clicking),g.stopPropagation()}t.event.bind(t[o],"mousedown",function(g){m(g)}),t.event.bind(t[o],"touchstart",function(g){m(g,!0)})}function Ui(t){var e=t.element,i=function(){return K(e,":hover")},s=function(){return K(t.scrollbarX,":focus")||K(t.scrollbarY,":focus")};function n(r,o){var a=Math.floor(e.scrollTop);if(r===0){if(!t.scrollbarYActive)return!1;if(a===0&&o>0||a>=t.contentHeight-t.containerHeight&&o<0)return!t.settings.wheelPropagation}var l=e.scrollLeft;if(o===0){if(!t.scrollbarXActive)return!1;if(l===0&&r<0||l>=t.contentWidth-t.containerWidth&&r>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",function(r){if(!(r.isDefaultPrevented&&r.isDefaultPrevented()||r.defaultPrevented)&&!(!i()&&!s())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(zi(o))return}var a=0,l=0;switch(r.which){case 37:r.metaKey?a=-t.contentWidth:r.altKey?a=-t.containerWidth:a=-30;break;case 38:r.metaKey?l=t.contentHeight:r.altKey?l=t.containerHeight:l=30;break;case 39:r.metaKey?a=t.contentWidth:r.altKey?a=t.containerWidth:a=30;break;case 40:r.metaKey?l=-t.contentHeight:r.altKey?l=-t.containerHeight:l=-30;break;case 32:r.shiftKey?l=t.containerHeight:l=-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&a!==0||t.settings.suppressScrollY&&l!==0||(e.scrollTop-=l,e.scrollLeft+=a,U(t),n(a,l)&&r.preventDefault())}})}function Gi(t){var e=t.element;function i(o,a){var l=Math.floor(e.scrollTop),h=e.scrollTop===0,c=l+e.offsetHeight===e.scrollHeight,d=e.scrollLeft===0,f=e.scrollLeft+e.offsetWidth===e.scrollWidth,v;return Math.abs(a)>Math.abs(o)?v=h||c:v=d||f,v?!t.settings.wheelPropagation:!0}function s(o){var a=o.deltaX,l=-1*o.deltaY;return(typeof a>"u"||typeof l>"u")&&(a=-1*o.wheelDeltaX/6,l=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(a*=10,l*=10),a!==a&&l!==l&&(a=0,l=o.wheelDelta),o.shiftKey?[-l,-a]:[a,l]}function n(o,a,l){if(!ie.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(o))return!1;for(var h=o;h&&h!==e;){if(h.classList.contains(M.element.consuming))return!0;var c=O(h);if(l&&c.overflowY.match(/(scroll|auto)/)){var d=h.scrollHeight-h.clientHeight;if(d>0&&(h.scrollTop>0&&l<0||h.scrollTop<d&&l>0))return!0}if(a&&c.overflowX.match(/(scroll|auto)/)){var f=h.scrollWidth-h.clientWidth;if(f>0&&(h.scrollLeft>0&&a<0||h.scrollLeft<f&&a>0))return!0}h=h.parentNode}return!1}function r(o){var a=s(o),l=a[0],h=a[1];if(!n(o.target,l,h)){var c=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(h?e.scrollTop-=h*t.settings.wheelSpeed:e.scrollTop+=l*t.settings.wheelSpeed,c=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(l?e.scrollLeft+=l*t.settings.wheelSpeed:e.scrollLeft-=h*t.settings.wheelSpeed,c=!0):(e.scrollTop-=h*t.settings.wheelSpeed,e.scrollLeft+=l*t.settings.wheelSpeed),U(t),c=c||i(l,h),c&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?t.event.bind(e,"wheel",r):typeof window.onmousewheel<"u"&&t.event.bind(e,"mousewheel",r)}function Bi(t){if(!ie.supportsTouch&&!ie.supportsIePointer)return;var e=t.element;function i(u,b){var y=Math.floor(e.scrollTop),m=e.scrollLeft,g=Math.abs(u),w=Math.abs(b);if(w>g){if(b<0&&y===t.contentHeight-t.containerHeight||b>0&&y===0)return window.scrollY===0&&b>0&&ie.isChrome}else if(g>w&&(u<0&&m===t.contentWidth-t.containerWidth||u>0&&m===0))return!0;return!0}function s(u,b){e.scrollTop-=b,e.scrollLeft-=u,U(t)}var n={},r=0,o={},a=null;function l(u){return u.targetTouches?u.targetTouches[0]:u}function h(u){return u.pointerType&&u.pointerType==="pen"&&u.buttons===0?!1:!!(u.targetTouches&&u.targetTouches.length===1||u.pointerType&&u.pointerType!=="mouse"&&u.pointerType!==u.MSPOINTER_TYPE_MOUSE)}function c(u){if(h(u)){var b=l(u);n.pageX=b.pageX,n.pageY=b.pageY,r=new Date().getTime(),a!==null&&clearInterval(a)}}function d(u,b,y){if(!e.contains(u))return!1;for(var m=u;m&&m!==e;){if(m.classList.contains(M.element.consuming))return!0;var g=O(m);if(y&&g.overflowY.match(/(scroll|auto)/)){var w=m.scrollHeight-m.clientHeight;if(w>0&&(m.scrollTop>0&&y<0||m.scrollTop<w&&y>0))return!0}if(b&&g.overflowX.match(/(scroll|auto)/)){var F=m.scrollWidth-m.clientWidth;if(F>0&&(m.scrollLeft>0&&b<0||m.scrollLeft<F&&b>0))return!0}m=m.parentNode}return!1}function f(u){if(h(u)){var b=l(u),y={pageX:b.pageX,pageY:b.pageY},m=y.pageX-n.pageX,g=y.pageY-n.pageY;if(d(u.target,m,g))return;s(m,g),n=y;var w=new Date().getTime(),F=w-r;F>0&&(o.x=m/F,o.y=g/F,r=w),i(m,g)&&u.preventDefault()}}function v(){t.settings.swipeEasing&&(clearInterval(a),a=setInterval(function(){if(t.isInitialized){clearInterval(a);return}if(!o.x&&!o.y){clearInterval(a);return}if(Math.abs(o.x)<.01&&Math.abs(o.y)<.01){clearInterval(a);return}if(!t.element){clearInterval(a);return}s(o.x*30,o.y*30),o.x*=.8,o.y*=.8},10))}ie.supportsTouch?(t.event.bind(e,"touchstart",c),t.event.bind(e,"touchmove",f),t.event.bind(e,"touchend",v)):ie.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",c),t.event.bind(e,"pointermove",f),t.event.bind(e,"pointerup",v)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",c),t.event.bind(e,"MSPointerMove",f),t.event.bind(e,"MSPointerUp",v)))}var Vi=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},Ki={"click-rail":Oi,"drag-thumb":Ni,keyboard:Ui,wheel:Gi,touch:Bi},fe=function(e,i){var s=this;if(i===void 0&&(i={}),typeof e=="string"&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=e,e.classList.add(M.main),this.settings=Vi();for(var n in i)this.settings[n]=i[n];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var r=function(){return e.classList.add(M.state.focus)},o=function(){return e.classList.remove(M.state.focus)};this.isRtl=O(e).direction==="rtl",this.isRtl===!0&&e.classList.add(M.rtl),this.isNegativeScroll=function(){var h=e.scrollLeft,c=null;return e.scrollLeft=-1,c=e.scrollLeft<0,e.scrollLeft=h,c}(),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new ae,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=be(M.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=be(M.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",r),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var a=O(this.scrollbarXRail);this.scrollbarXBottom=parseInt(a.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=C(a.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=C(a.borderLeftWidth)+C(a.borderRightWidth),A(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=C(a.marginLeft)+C(a.marginRight),A(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=be(M.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=be(M.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",r),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=O(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=C(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?$i(this.scrollbarY):null,this.railBorderYWidth=C(l.borderTopWidth)+C(l.borderBottomWidth),A(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=C(l.marginTop)+C(l.marginBottom),A(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(h){return Ki[h](s)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(h){return s.onScroll(h)}),U(this)};fe.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,A(this.scrollbarXRail,{display:"block"}),A(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=C(O(this.scrollbarXRail).marginLeft)+C(O(this.scrollbarXRail).marginRight),this.railYMarginHeight=C(O(this.scrollbarYRail).marginTop)+C(O(this.scrollbarYRail).marginBottom),A(this.scrollbarXRail,{display:"none"}),A(this.scrollbarYRail,{display:"none"}),U(this),Ce(this,"top",0,!1,!0),Ce(this,"left",0,!1,!0),A(this.scrollbarXRail,{display:""}),A(this.scrollbarYRail,{display:""}))};fe.prototype.onScroll=function(e){this.isAlive&&(U(this),Ce(this,"top",this.element.scrollTop-this.lastScrollTop),Ce(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};fe.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),ne(this.scrollbarX),ne(this.scrollbarY),ne(this.scrollbarXRail),ne(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};fe.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};const Qe=["scroll","ps-scroll-y","ps-scroll-x","ps-scroll-up","ps-scroll-down","ps-scroll-left","ps-scroll-right","ps-y-reach-start","ps-y-reach-end","ps-x-reach-start","ps-x-reach-end"];var Qi={name:"PerfectScrollbar",props:{options:{type:Object,required:!1,default:()=>{}},tag:{type:String,required:!1,default:"div"},watchOptions:{type:Boolean,required:!1,default:!1}},emits:Qe,data(){return{ps:null}},watch:{watchOptions(t){!t&&this.watcher?this.watcher():this.createWatcher()}},mounted(){this.create(),this.watchOptions&&this.createWatcher()},updated(){this.$nextTick(()=>{this.update()})},beforeUnmount(){this.destroy()},methods:{create(){this.ps&&this.$isServer||(this.ps=new fe(this.$el,this.options),Qe.forEach(t=>{this.ps.element.addEventListener(t,e=>this.$emit(t,e))}))},createWatcher(){this.watcher=this.$watch("options",()=>{this.destroy(),this.create()},{deep:!0})},update(){this.ps&&this.ps.update()},destroy(){this.ps&&(this.ps.destroy(),this.ps=null)}},render(){return Bt(this.tag,{class:"ps"},this.$slots.default&&this.$slots.default())}},Fe={},qi={get exports(){return Fe},set exports(t){Fe=t}},yt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Le={},Zi={get exports(){return Le},set exports(t){Le=t}},ji=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},Ji=ji,es=Array.prototype.concat,ts=Array.prototype.slice,qe=Zi.exports=function(e){for(var i=[],s=0,n=e.length;s<n;s++){var r=e[s];Ji(r)?i=es.call(i,ts.call(r)):i.push(r)}return i};qe.wrap=function(t){return function(){return t(qe(arguments))}};var ce=yt,pe=Le,Et=Object.hasOwnProperty,xt=Object.create(null);for(var Te in ce)Et.call(ce,Te)&&(xt[ce[Te]]=Te);var W=qi.exports={to:{},get:{}};W.get=function(t){var e=t.substring(0,3).toLowerCase(),i,s;switch(e){case"hsl":i=W.get.hsl(t),s="hsl";break;case"hwb":i=W.get.hwb(t),s="hwb";break;default:i=W.get.rgb(t),s="rgb";break}return i?{model:s,value:i}:null};W.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,i=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,s=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,r=/^(\w+)$/,o=[0,0,0,1],a,l,h;if(a=t.match(i)){for(h=a[2],a=a[1],l=0;l<3;l++){var c=l*2;o[l]=parseInt(a.slice(c,c+2),16)}h&&(o[3]=parseInt(h,16)/255)}else if(a=t.match(e)){for(a=a[1],h=a[3],l=0;l<3;l++)o[l]=parseInt(a[l]+a[l],16);h&&(o[3]=parseInt(h+h,16)/255)}else if(a=t.match(s)){for(l=0;l<3;l++)o[l]=parseInt(a[l+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=t.match(n)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(a[l+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=t.match(r))?a[1]==="transparent"?[0,0,0,0]:Et.call(ce,a[1])?(o=ce[a[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=q(o[l],0,255);return o[3]=q(o[3],0,1),o};W.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(e);if(i){var s=parseFloat(i[4]),n=(parseFloat(i[1])%360+360)%360,r=q(parseFloat(i[2]),0,100),o=q(parseFloat(i[3]),0,100),a=q(isNaN(s)?1:s,0,1);return[n,r,o,a]}return null};W.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,i=t.match(e);if(i){var s=parseFloat(i[4]),n=(parseFloat(i[1])%360+360)%360,r=q(parseFloat(i[2]),0,100),o=q(parseFloat(i[3]),0,100),a=q(isNaN(s)?1:s,0,1);return[n,r,o,a]}return null};W.to.hex=function(){var t=pe(arguments);return"#"+Ee(t[0])+Ee(t[1])+Ee(t[2])+(t[3]<1?Ee(Math.round(t[3]*255)):"")};W.to.rgb=function(){var t=pe(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};W.to.rgb.percent=function(){var t=pe(arguments),e=Math.round(t[0]/255*100),i=Math.round(t[1]/255*100),s=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+i+"%, "+s+"%)":"rgba("+e+"%, "+i+"%, "+s+"%, "+t[3]+")"};W.to.hsl=function(){var t=pe(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};W.to.hwb=function(){var t=pe(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};W.to.keyword=function(t){return xt[t.slice(0,3)]};function q(t,e,i){return Math.min(Math.max(e,t),i)}function Ee(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}var Re={},is={get exports(){return Re},set exports(t){Re=t}},J=yt,wt={};for(var Pe in J)J.hasOwnProperty(Pe)&&(wt[J[Pe]]=Pe);var p=is.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var X in p)if(p.hasOwnProperty(X)){if(!("channels"in p[X]))throw new Error("missing channels property: "+X);if(!("labels"in p[X]))throw new Error("missing channel labels property: "+X);if(p[X].labels.length!==p[X].channels)throw new Error("channel and label counts mismatch: "+X);var ss=p[X].channels,ns=p[X].labels;delete p[X].channels,delete p[X].labels,Object.defineProperty(p[X],"channels",{value:ss}),Object.defineProperty(p[X],"labels",{value:ns})}p.rgb.hsl=function(t){var e=t[0]/255,i=t[1]/255,s=t[2]/255,n=Math.min(e,i,s),r=Math.max(e,i,s),o=r-n,a,l,h;return r===n?a=0:e===r?a=(i-s)/o:i===r?a=2+(s-e)/o:s===r&&(a=4+(e-i)/o),a=Math.min(a*60,360),a<0&&(a+=360),h=(n+r)/2,r===n?l=0:h<=.5?l=o/(r+n):l=o/(2-r-n),[a,l*100,h*100]};p.rgb.hsv=function(t){var e,i,s,n,r,o=t[0]/255,a=t[1]/255,l=t[2]/255,h=Math.max(o,a,l),c=h-Math.min(o,a,l),d=function(f){return(h-f)/6/c+1/2};return c===0?n=r=0:(r=c/h,e=d(o),i=d(a),s=d(l),o===h?n=s-i:a===h?n=1/3+e-s:l===h&&(n=2/3+i-e),n<0?n+=1:n>1&&(n-=1)),[n*360,r*100,h*100]};p.rgb.hwb=function(t){var e=t[0],i=t[1],s=t[2],n=p.rgb.hsl(t)[0],r=1/255*Math.min(e,Math.min(i,s));return s=1-1/255*Math.max(e,Math.max(i,s)),[n,r*100,s*100]};p.rgb.cmyk=function(t){var e=t[0]/255,i=t[1]/255,s=t[2]/255,n,r,o,a;return a=Math.min(1-e,1-i,1-s),n=(1-e-a)/(1-a)||0,r=(1-i-a)/(1-a)||0,o=(1-s-a)/(1-a)||0,[n*100,r*100,o*100,a*100]};function rs(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}p.rgb.keyword=function(t){var e=wt[t];if(e)return e;var i=1/0,s;for(var n in J)if(J.hasOwnProperty(n)){var r=J[n],o=rs(t,r);o<i&&(i=o,s=n)}return s};p.keyword.rgb=function(t){return J[t]};p.rgb.xyz=function(t){var e=t[0]/255,i=t[1]/255,s=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var n=e*.4124+i*.3576+s*.1805,r=e*.2126+i*.7152+s*.0722,o=e*.0193+i*.1192+s*.9505;return[n*100,r*100,o*100]};p.rgb.lab=function(t){var e=p.rgb.xyz(t),i=e[0],s=e[1],n=e[2],r,o,a;return i/=95.047,s/=100,n/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,r=116*s-16,o=500*(i-s),a=200*(s-n),[r,o,a]};p.hsl.rgb=function(t){var e=t[0]/360,i=t[1]/100,s=t[2]/100,n,r,o,a,l;if(i===0)return l=s*255,[l,l,l];s<.5?r=s*(1+i):r=s+i-s*i,n=2*s-r,a=[0,0,0];for(var h=0;h<3;h++)o=e+1/3*-(h-1),o<0&&o++,o>1&&o--,6*o<1?l=n+(r-n)*6*o:2*o<1?l=r:3*o<2?l=n+(r-n)*(2/3-o)*6:l=n,a[h]=l*255;return a};p.hsl.hsv=function(t){var e=t[0],i=t[1]/100,s=t[2]/100,n=i,r=Math.max(s,.01),o,a;return s*=2,i*=s<=1?s:2-s,n*=r<=1?r:2-r,a=(s+i)/2,o=s===0?2*n/(r+n):2*i/(s+i),[e,o*100,a*100]};p.hsv.rgb=function(t){var e=t[0]/60,i=t[1]/100,s=t[2]/100,n=Math.floor(e)%6,r=e-Math.floor(e),o=255*s*(1-i),a=255*s*(1-i*r),l=255*s*(1-i*(1-r));switch(s*=255,n){case 0:return[s,l,o];case 1:return[a,s,o];case 2:return[o,s,l];case 3:return[o,a,s];case 4:return[l,o,s];case 5:return[s,o,a]}};p.hsv.hsl=function(t){var e=t[0],i=t[1]/100,s=t[2]/100,n=Math.max(s,.01),r,o,a;return a=(2-i)*s,r=(2-i)*n,o=i*n,o/=r<=1?r:2-r,o=o||0,a/=2,[e,o*100,a*100]};p.hwb.rgb=function(t){var e=t[0]/360,i=t[1]/100,s=t[2]/100,n=i+s,r,o,a,l;n>1&&(i/=n,s/=n),r=Math.floor(6*e),o=1-s,a=6*e-r,r&1&&(a=1-a),l=i+a*(o-i);var h,c,d;switch(r){default:case 6:case 0:h=o,c=l,d=i;break;case 1:h=l,c=o,d=i;break;case 2:h=i,c=o,d=l;break;case 3:h=i,c=l,d=o;break;case 4:h=l,c=i,d=o;break;case 5:h=o,c=i,d=l;break}return[h*255,c*255,d*255]};p.cmyk.rgb=function(t){var e=t[0]/100,i=t[1]/100,s=t[2]/100,n=t[3]/100,r,o,a;return r=1-Math.min(1,e*(1-n)+n),o=1-Math.min(1,i*(1-n)+n),a=1-Math.min(1,s*(1-n)+n),[r*255,o*255,a*255]};p.xyz.rgb=function(t){var e=t[0]/100,i=t[1]/100,s=t[2]/100,n,r,o;return n=e*3.2406+i*-1.5372+s*-.4986,r=e*-.9689+i*1.8758+s*.0415,o=e*.0557+i*-.204+s*1.057,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[n*255,r*255,o*255]};p.xyz.lab=function(t){var e=t[0],i=t[1],s=t[2],n,r,o;return e/=95.047,i/=100,s/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,n=116*i-16,r=500*(e-i),o=200*(i-s),[n,r,o]};p.lab.xyz=function(t){var e=t[0],i=t[1],s=t[2],n,r,o;r=(e+16)/116,n=i/500+r,o=r-s/200;var a=Math.pow(r,3),l=Math.pow(n,3),h=Math.pow(o,3);return r=a>.008856?a:(r-16/116)/7.787,n=l>.008856?l:(n-16/116)/7.787,o=h>.008856?h:(o-16/116)/7.787,n*=95.047,r*=100,o*=108.883,[n,r,o]};p.lab.lch=function(t){var e=t[0],i=t[1],s=t[2],n,r,o;return n=Math.atan2(s,i),r=n*360/2/Math.PI,r<0&&(r+=360),o=Math.sqrt(i*i+s*s),[e,o,r]};p.lch.lab=function(t){var e=t[0],i=t[1],s=t[2],n,r,o;return o=s/360*2*Math.PI,n=i*Math.cos(o),r=i*Math.sin(o),[e,n,r]};p.rgb.ansi16=function(t){var e=t[0],i=t[1],s=t[2],n=1 in arguments?arguments[1]:p.rgb.hsv(t)[2];if(n=Math.round(n/50),n===0)return 30;var r=30+(Math.round(s/255)<<2|Math.round(i/255)<<1|Math.round(e/255));return n===2&&(r+=60),r};p.hsv.ansi16=function(t){return p.rgb.ansi16(p.hsv.rgb(t),t[2])};p.rgb.ansi256=function(t){var e=t[0],i=t[1],s=t[2];if(e===i&&i===s)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var n=16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(s/255*5);return n};p.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var i=(~~(t>50)+1)*.5,s=(e&1)*i*255,n=(e>>1&1)*i*255,r=(e>>2&1)*i*255;return[s,n,r]};p.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var i,s=Math.floor(t/36)/5*255,n=Math.floor((i=t%36)/6)/5*255,r=i%6/5*255;return[s,n,r]};p.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),i=e.toString(16).toUpperCase();return"000000".substring(i.length)+i};p.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var i=e[0];e[0].length===3&&(i=i.split("").map(function(a){return a+a}).join(""));var s=parseInt(i,16),n=s>>16&255,r=s>>8&255,o=s&255;return[n,r,o]};p.rgb.hcg=function(t){var e=t[0]/255,i=t[1]/255,s=t[2]/255,n=Math.max(Math.max(e,i),s),r=Math.min(Math.min(e,i),s),o=n-r,a,l;return o<1?a=r/(1-o):a=0,o<=0?l=0:n===e?l=(i-s)/o%6:n===i?l=2+(s-e)/o:l=4+(e-i)/o+4,l/=6,l%=1,[l*360,o*100,a*100]};p.hsl.hcg=function(t){var e=t[1]/100,i=t[2]/100,s=1,n=0;return i<.5?s=2*e*i:s=2*e*(1-i),s<1&&(n=(i-.5*s)/(1-s)),[t[0],s*100,n*100]};p.hsv.hcg=function(t){var e=t[1]/100,i=t[2]/100,s=e*i,n=0;return s<1&&(n=(i-s)/(1-s)),[t[0],s*100,n*100]};p.hcg.rgb=function(t){var e=t[0]/360,i=t[1]/100,s=t[2]/100;if(i===0)return[s*255,s*255,s*255];var n=[0,0,0],r=e%1*6,o=r%1,a=1-o,l=0;switch(Math.floor(r)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return l=(1-i)*s,[(i*n[0]+l)*255,(i*n[1]+l)*255,(i*n[2]+l)*255]};p.hcg.hsv=function(t){var e=t[1]/100,i=t[2]/100,s=e+i*(1-e),n=0;return s>0&&(n=e/s),[t[0],n*100,s*100]};p.hcg.hsl=function(t){var e=t[1]/100,i=t[2]/100,s=i*(1-e)+.5*e,n=0;return s>0&&s<.5?n=e/(2*s):s>=.5&&s<1&&(n=e/(2*(1-s))),[t[0],n*100,s*100]};p.hcg.hwb=function(t){var e=t[1]/100,i=t[2]/100,s=e+i*(1-e);return[t[0],(s-e)*100,(1-s)*100]};p.hwb.hcg=function(t){var e=t[1]/100,i=t[2]/100,s=1-i,n=s-e,r=0;return n<1&&(r=(s-n)/(1-n)),[t[0],n*100,r*100]};p.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};p.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};p.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};p.gray.hsl=p.gray.hsv=function(t){return[0,0,t[0]]};p.gray.hwb=function(t){return[0,100,t[0]]};p.gray.cmyk=function(t){return[0,0,0,t[0]]};p.gray.lab=function(t){return[t[0],0,0]};p.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,i=(e<<16)+(e<<8)+e,s=i.toString(16).toUpperCase();return"000000".substring(s.length)+s};p.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]};var _e=Re;function os(){for(var t={},e=Object.keys(_e),i=e.length,s=0;s<i;s++)t[e[s]]={distance:-1,parent:null};return t}function as(t){var e=os(),i=[t];for(e[t].distance=0;i.length;)for(var s=i.pop(),n=Object.keys(_e[s]),r=n.length,o=0;o<r;o++){var a=n[o],l=e[a];l.distance===-1&&(l.distance=e[s].distance+1,l.parent=s,i.unshift(a))}return e}function ls(t,e){return function(i){return e(t(i))}}function hs(t,e){for(var i=[e[t].parent,t],s=_e[e[t].parent][t],n=e[t].parent;e[n].parent;)i.unshift(e[n].parent),s=ls(_e[e[n].parent][n],s),n=e[n].parent;return s.conversion=i,s}var cs=function(t){for(var e=as(t),i={},s=Object.keys(e),n=s.length,r=0;r<n;r++){var o=s[r],a=e[o];a.parent!==null&&(i[o]=hs(o,e))}return i},Xe=Re,ds=cs,se={},us=Object.keys(Xe);function gs(t){var e=function(i){return i==null?i:(arguments.length>1&&(i=Array.prototype.slice.call(arguments)),t(i))};return"conversion"in t&&(e.conversion=t.conversion),e}function fs(t){var e=function(i){if(i==null)return i;arguments.length>1&&(i=Array.prototype.slice.call(arguments));var s=t(i);if(typeof s=="object")for(var n=s.length,r=0;r<n;r++)s[r]=Math.round(s[r]);return s};return"conversion"in t&&(e.conversion=t.conversion),e}us.forEach(function(t){se[t]={},Object.defineProperty(se[t],"channels",{value:Xe[t].channels}),Object.defineProperty(se[t],"labels",{value:Xe[t].labels});var e=ds(t),i=Object.keys(e);i.forEach(function(s){var n=e[s];se[t][s]=fs(n),se[t][s].raw=gs(n)})});var ps=se,he=Fe,Y=ps,De=[].slice,Ct=["keyword","gray","hex"],Ae={};Object.keys(Y).forEach(function(t){Ae[De.call(Y[t].labels).sort().join("")]=t});var Me={};function P(t,e){if(!(this instanceof P))return new P(t,e);if(e&&e in Ct&&(e=null),e&&!(e in Y))throw new Error("Unknown model: "+e);var i,s;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof P)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var n=he.get(t);if(n===null)throw new Error("Unable to parse color from string: "+t);this.model=n.model,s=Y[this.model].channels,this.color=n.value.slice(0,s),this.valpha=typeof n.value[s]=="number"?n.value[s]:1}else if(t.length){this.model=e||"rgb",s=Y[this.model].channels;var r=De.call(t,0,s);this.color=Ye(r,s),this.valpha=typeof t[s]=="number"?t[s]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(t);"alpha"in t&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var a=o.sort().join("");if(!(a in Ae))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Ae[a];var l=Y[this.model].labels,h=[];for(i=0;i<l.length;i++)h.push(t[l[i]]);this.color=Ye(h)}if(Me[this.model])for(s=Y[this.model].channels,i=0;i<s;i++){var c=Me[this.model][i];c&&(this.color[i]=c(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}P.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in he.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var i=e.valpha===1?e.color:e.color.concat(this.valpha);return he.to[e.model](i)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),i=e.valpha===1?e.color:e.color.concat(this.valpha);return he.to.rgb.percent(i)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=Y[this.model].channels,i=Y[this.model].labels,s=0;s<e;s++)t[i[s]]=this.color[s];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new P(this.color.map(ms(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new P(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:_("rgb",0,k(255)),green:_("rgb",1,k(255)),blue:_("rgb",2,k(255)),hue:_(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:_("hsl",1,k(100)),lightness:_("hsl",2,k(100)),saturationv:_("hsv",1,k(100)),value:_("hsv",2,k(100)),chroma:_("hcg",1,k(100)),gray:_("hcg",2,k(100)),white:_("hwb",1,k(100)),wblack:_("hwb",2,k(100)),cyan:_("cmyk",0,k(100)),magenta:_("cmyk",1,k(100)),yellow:_("cmyk",2,k(100)),black:_("cmyk",3,k(100)),x:_("xyz",0,k(100)),y:_("xyz",1,k(100)),z:_("xyz",2,k(100)),l:_("lab",0,k(100)),a:_("lab",1),b:_("lab",2),keyword:function(t){return arguments.length?new P(t):Y[this.model].keyword(this.color)},hex:function(t){return arguments.length?new P(t):he.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],i=0;i<t.length;i++){var s=t[i]/255;e[i]=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return P.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),i=e.color[0];return i=(i+t)%360,i=i<0?360+i:i,e.color[0]=i,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var i=t.rgb(),s=this.rgb(),n=e===void 0?.5:e,r=2*n-1,o=i.alpha()-s.alpha(),a=((r*o===-1?r:(r+o)/(1+r*o))+1)/2,l=1-a;return P.rgb(a*i.red()+l*s.red(),a*i.green()+l*s.green(),a*i.blue()+l*s.blue(),i.alpha()*n+s.alpha()*(1-n))}};Object.keys(Y).forEach(function(t){if(Ct.indexOf(t)===-1){var e=Y[t].channels;P.prototype[t]=function(){if(this.model===t)return new P(this);if(arguments.length)return new P(arguments,t);var i=typeof arguments[e]=="number"?e:this.valpha;return new P(bs(Y[this.model][t].raw(this.color)).concat(i),t)},P[t]=function(i){return typeof i=="number"&&(i=Ye(De.call(arguments),e)),new P(i,t)}}});function vs(t,e){return Number(t.toFixed(e))}function ms(t){return function(e){return vs(e,t)}}function _(t,e,i){return t=Array.isArray(t)?t:[t],t.forEach(function(s){(Me[s]||(Me[s]=[]))[e]=i}),t=t[0],function(s){var n;return arguments.length?(i&&(s=i(s)),n=this[t](),n.color[e]=s,n):(n=this[t]().color[e],i&&(n=i(n)),n)}}function k(t){return function(e){return Math.max(0,Math.min(t,e))}}function bs(t){return Array.isArray(t)?t:[t]}function Ye(t,e){for(var i=0;i<e;i++)typeof t[i]!="number"&&(t[i]=0);return t}var ke=P;class ee extends ue.EventEmitter{constructor(e){super(),this.name=e}init(e,i){this.renderEngine=e,this.interactionsEngine=i}}const N=(t,e={})=>Object.keys(t).reduce((i,s)=>(e[s]?i[s]=e[s]:i[s]=t[s],i),{}),Ze=t=>typeof t=="number",G=t=>t[t.length-1],Rt=1,_t=.25,ys=Rt*2+_t,Mt=(t,e,i=null,s=0)=>{t.forEach(n=>{const r=e(n,i,s);n.children&&Mt(n.children,e,r||n,s+1)})},kt=t=>{const e=[];let i=0;return Mt(t,(s,n,r)=>{const o={source:s,end:s.start+s.duration,parent:n,level:r,index:i++};return e.push(o),o}),e.sort((s,n)=>s.level-n.level||s.source.start-n.source.start)},St=t=>{let e=!0,i=0,s=0;return t.forEach(({source:{start:n},end:r})=>{e?(i=n,s=r,e=!1):(i=i<n?i:n,s=s>r?s:r)}),{min:i,max:s}},Es=t=>{const e=t[0],i=G(t);return i.source.start+i.source.duration-e.source.start},xs=(t,e,i)=>t.source.start<i&&t.end>e||t.source.start>e&&t.end<i,ws=(t,e,i)=>t.start<i&&t.end>e||t.start>e&&t.end<i,Cs=(t,e)=>t.source.color===e.source.color&&t.source.type===e.source.type;function Tt(t,e=Cs){return t.reduce((i,s)=>{const n=G(i),r=n&&G(n);return r&&r.level===s.level&&e(r,s)?n.push(s):i.push([s]),i},[]).filter(i=>i.length).map(i=>({nodes:i}))}const ze=(t,e,i=0,s=0,n=_t,r=Rt)=>{let o=null,a=null,l=0;return t.reduce((h,{nodes:c})=>{o=null,a=null,l=0;for(const d of c)xs(d,i,s)&&(o&&!a||o&&a&&(d.source.start-(a.source.start+a.source.duration))*e<n&&d.source.duration*e<r&&a.source.duration*e<r?(o[l]=d,l++):(o=[d],l=1,h.push(o)),a=d);return h},[]).map(h=>{const c=h[0],d=Es(h);return{start:c.source.start,end:c.source.start+d,duration:d,type:c.source.type,color:c.source.color,level:c.level,nodes:h}})},Pt=(t,e,i,s,n,r)=>t.reduce((o,a)=>(ws(a,i,s)&&(a.duration*e<=ys?o.push(a):o.push(...ze([a],e,i,s,n,r))),o),[]),je=ke.hsl(180,30,70);class Rs extends ee{constructor({data:e,colors:i={},name:s="flameChartPlugin"}){super(s),this.height=0,this.flatTree=[],this.positionY=0,this.colors={},this.selectedRegion=null,this.hoveredRegion=null,this.lastRandomColor=je,this.metaClusterizedFlatTree=[],this.actualClusterizedFlatTree=[],this.initialClusterizedFlatTree=[],this.lastUsedColor=null,this.renderChartTimeout=-1,this.data=e,this.userColors=i,this.parseData(),this.reset()}init(e,i){super.init(e,i),this.interactionsEngine.on("change-position",this.handlePositionChange.bind(this)),this.interactionsEngine.on("select",this.handleSelect.bind(this)),this.interactionsEngine.on("hover",this.handleHover.bind(this)),this.interactionsEngine.on("up",this.handleMouseUp.bind(this)),this.initData()}handlePositionChange({deltaX:e,deltaY:i}){const s=this.positionY,n=this.renderEngine.parent.positionX;this.interactionsEngine.setCursor("grabbing"),this.positionY+i>=0?this.setPositionY(this.positionY+i):this.setPositionY(0),this.renderEngine.tryToChangePosition(e),(n!==this.renderEngine.parent.positionX||s!==this.positionY)&&this.renderEngine.parent.render()}handleMouseUp(){this.interactionsEngine.clearCursor()}setPositionY(e){this.positionY=e}reset(){this.colors={},this.lastRandomColor=je,this.positionY=0,this.selectedRegion=null}calcMinMax(){const{flatTree:e}=this,{min:i,max:s}=St(e);this.min=i,this.max=s}handleSelect(e){var i,s;const n=this.findNodeInCluster(e);this.selectedRegion!==n&&(this.selectedRegion=n,this.renderEngine.render(),this.emit("select",{node:(s=(i=this.selectedRegion)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:null,type:"flame-chart-node"}))}handleHover(e){this.hoveredRegion=this.findNodeInCluster(e)}findNodeInCluster(e){const i=this.interactionsEngine.getMouse();if(e&&e.type==="cluster"){const s=e.data.nodes.find(({level:n,source:{start:r,duration:o}})=>{const{x:a,y:l,w:h}=this.calcRect(r,o,n);return i.x>=a&&i.x<=a+h&&i.y>=l&&i.y<=l+this.renderEngine.blockHeight});if(s)return{data:s,type:"node"}}return null}getColor(e="_default",i){if(i)return i;if(this.colors[e])return this.colors[e];if(this.userColors[e]){const s=new ke(this.userColors[e]);return this.colors[e]=s.rgb().toString(),this.colors[e]}return this.lastRandomColor=this.lastRandomColor.rotate(27),this.colors[e]=this.lastRandomColor.rgb().toString(),this.colors[e]}setData(e){this.data=e,this.parseData(),this.initData(),this.reset(),this.renderEngine.recalcMinMax(),this.renderEngine.resetParentView()}parseData(){this.flatTree=kt(this.data),this.calcMinMax()}initData(){this.metaClusterizedFlatTree=Tt(this.flatTree),this.initialClusterizedFlatTree=ze(this.metaClusterizedFlatTree,this.renderEngine.zoom,this.min,this.max),this.reclusterizeClusteredFlatTree()}reclusterizeClusteredFlatTree(){this.actualClusterizedFlatTree=Pt(this.initialClusterizedFlatTree,this.renderEngine.zoom,this.renderEngine.positionX,this.renderEngine.positionX+this.renderEngine.getRealView())}calcRect(e,i,s){const n=i*this.renderEngine.zoom;return{x:this.renderEngine.timeToPosition(e),y:s*(this.renderEngine.blockHeight+1)-this.positionY,w:n<=.1?.1:n>=3?n-1:n-n/3}}renderTooltip(){if(this.hoveredRegion){if(this.renderEngine.options.tooltip===!1)return!0;if(typeof this.renderEngine.options.tooltip=="function")this.renderEngine.options.tooltip(this.hoveredRegion,this.renderEngine,this.interactionsEngine.getGlobalMouse());else{const{data:{source:{start:e,duration:i,name:s,children:n}}}=this.hoveredRegion,r=this.renderEngine.getTimeUnits(),o=i-(n?n.reduce((d,{duration:f})=>d+f,0):0),a=this.renderEngine.getAccuracy()+2,l=`${s}`,h=`duration: ${i.toFixed(a)} ${r} ${n!=null&&n.length?`(self ${o.toFixed(a)} ${r})`:""}`,c=`start: ${e.toFixed(a)}`;this.renderEngine.renderTooltipFromData([{text:l},{text:h},{text:c}],this.interactionsEngine.getGlobalMouse())}return!0}return!1}render(){const{width:e,blockHeight:i,height:s,minTextWidth:n}=this.renderEngine;this.lastUsedColor=null,this.reclusterizeClusteredFlatTree();const r=l=>h=>{const{start:c,duration:d,level:f}=h,{x:v,y:u,w:b}=this.calcRect(c,d,f);v+b>0&&v<e&&u+i>0&&u<s&&l(h,v,u,b)},o=(l,h,c,d)=>{const{type:f,nodes:v,color:u}=l,b=this.interactionsEngine.getMouse();b.y>=c&&b.y<=c+i&&a(l,h,c,d),d>=.25&&this.renderEngine.addRectToRenderQueue(this.getColor(f,u),h,c,d),d>=n&&v.length===1&&this.renderEngine.addTextToRenderQueue(v[0].source.name,h,c,d)},a=(l,h,c,d)=>{this.interactionsEngine.addHitRegion("cluster",l,h,c,d,i)};if(this.actualClusterizedFlatTree.forEach(r(o)),this.selectedRegion&&this.selectedRegion.type==="node"){const{source:{start:l,duration:h},level:c}=this.selectedRegion.data,{x:d,y:f,w:v}=this.calcRect(l,h,c);this.renderEngine.addStrokeToRenderQueue("green",d,f,v,this.renderEngine.blockHeight)}clearTimeout(this.renderChartTimeout),this.renderChartTimeout=window.setTimeout(()=>{this.interactionsEngine.clearHitRegions(),this.actualClusterizedFlatTree.forEach(r(a))},16)}}const Je={font:"10px sans-serif",fontColor:"black"};class _s extends ee{constructor(e={}){super("timeGridPlugin"),this.styles=Je,this.height=0,this.setSettings(e)}setSettings({styles:e}){this.styles=N(Je,e),this.renderEngine&&this.overrideEngineSettings()}overrideEngineSettings(){this.renderEngine.setSettingsOverrides({styles:this.styles}),this.height=Math.round(this.renderEngine.charHeight+10)}init(e,i){super.init(e,i),this.overrideEngineSettings()}render(){return this.renderEngine.parent.timeGrid.renderTimes(this.renderEngine),this.renderEngine.parent.timeGrid.renderLines(0,this.renderEngine.height,this.renderEngine),!0}}class Ms extends ee{constructor({data:e,name:i="marksPlugin"}){super(i),this.hoveredRegion=null,this.selectedRegion=null,this.marks=this.prepareMarks(e),this.calcMinMax()}calcMinMax(){const{marks:e}=this;e.length&&(this.min=e.reduce((i,{timestamp:s})=>s<i?s:i,e[0].timestamp),this.max=e.reduce((i,{timestamp:s})=>s>i?s:i,e[0].timestamp))}init(e,i){super.init(e,i),this.interactionsEngine.on("hover",this.handleHover.bind(this)),this.interactionsEngine.on("select",this.handleSelect.bind(this))}handleHover(e){this.hoveredRegion=e}handleSelect(e){var i;this.selectedRegion!==e&&(this.selectedRegion=e,this.emit("select",{node:(i=e==null?void 0:e.data)!==null&&i!==void 0?i:null,type:"mark"}),this.renderEngine.render())}get height(){return this.renderEngine.blockHeight+2}prepareMarks(e){return e.map(({color:i,...s})=>({...s,color:new ke(i).alpha(.7).rgb().toString()})).sort((i,s)=>i.timestamp-s.timestamp)}setMarks(e){this.marks=this.prepareMarks(e),this.calcMinMax(),this.renderEngine.recalcMinMax(),this.renderEngine.resetParentView()}calcMarksBlockPosition(e,i){return e>0&&i>e?i:e}render(){this.marks.reduce((e,i)=>{const{timestamp:s,color:n,shortName:r}=i,{width:o}=this.renderEngine.ctx.measureText(r),a=o+this.renderEngine.blockPaddingLeftRight*2,l=this.renderEngine.timeToPosition(s),h=this.calcMarksBlockPosition(l,e);return this.renderEngine.addRectToRenderQueue(n,h,1,a),this.renderEngine.addTextToRenderQueue(r,h,1,a),this.interactionsEngine.addHitRegion("timestamp",i,h,1,a,this.renderEngine.blockHeight),h+a},0)}postRender(){this.marks.forEach(e=>{const{timestamp:i,color:s}=e,n=this.renderEngine.timeToPosition(i);this.renderEngine.parent.setCtxValue("strokeStyle",s),this.renderEngine.parent.setCtxValue("lineWidth",1),this.renderEngine.parent.callCtx("setLineDash",[8,7]),this.renderEngine.parent.ctx.beginPath(),this.renderEngine.parent.ctx.moveTo(n,this.renderEngine.position),this.renderEngine.parent.ctx.lineTo(n,this.renderEngine.parent.height),this.renderEngine.parent.ctx.stroke()})}renderTooltip(){if(this.hoveredRegion&&this.hoveredRegion.type==="timestamp"){if(this.renderEngine.options.tooltip===!1)return!0;if(typeof this.renderEngine.options.tooltip=="function")this.renderEngine.options.tooltip(this.hoveredRegion,this.renderEngine,this.interactionsEngine.getGlobalMouse());else{const{data:{fullName:e,timestamp:i}}=this.hoveredRegion,s=this.renderEngine.getAccuracy()+2,n=`${e}`,r=`${i.toFixed(s)} ${this.renderEngine.timeUnits}`;this.renderEngine.renderTooltipFromData([{text:n},{text:r}],this.interactionsEngine.getGlobalMouse())}return!0}return!1}}const ks=85,et={color:"rgba(90,90,90,0.20)"};class Ht{constructor(e){this.styles=et,this.timeUnits="ms",this.start=0,this.end=0,this.accuracy=0,this.delta=0,this.setSettings(e)}setDefaultRenderEngine(e){this.renderEngine=e,this.timeUnits=this.renderEngine.getTimeUnits()}setSettings({styles:e}){this.styles=N(et,e),this.renderEngine&&(this.timeUnits=this.renderEngine.getTimeUnits())}recalc(){const e=this.renderEngine.max-this.renderEngine.min,i=this.renderEngine.width/ks,s=e/i,n=this.renderEngine.getRealView(),r=n/(e||1);this.delta=s/Math.pow(2,Math.floor(Math.log2(1/r))),this.start=Math.floor((this.renderEngine.positionX-this.renderEngine.min)/this.delta),this.end=Math.ceil(n/this.delta)+this.start,this.accuracy=this.calcNumberFix()}calcNumberFix(){var e;const i=(this.delta/2).toString();if(i.includes("e"))return Number((e=i.match(/\d+$/))===null||e===void 0?void 0:e[0]);const s=i.match(/(0\.0*)/);return s?s[0].length-1:0}getTimelineAccuracy(){return this.accuracy}forEachTime(e){for(let i=this.start;i<=this.end;i++){const s=i*this.delta+this.renderEngine.min,n=this.renderEngine.timeToPosition(Number(s.toFixed(this.accuracy)));e(n,s)}}renderLines(e,i,s=this.renderEngine){s.setCtxValue("fillStyle",this.styles.color),this.forEachTime(n=>{s.fillRect(n,e,1,i)})}renderTimes(e=this.renderEngine){e.setCtxValue("fillStyle",e.styles.fontColor),e.setCtxFont(e.styles.font),this.forEachTime((i,s)=>{e.fillText(s.toFixed(this.accuracy)+this.timeUnits,i+e.blockPaddingLeftRight,e.charHeight)})}}function xe(t,e,i,s){return t.length?t.reduce((n,{[e]:r})=>i(n,r),t[0][e]):s}const Ft=t=>t.items.map(({name:e,intervals:i,timing:s,meta:n},r)=>{const a=(typeof i=="string"?t.intervals[i]:i).map(({start:v,end:u,color:b,type:y,name:m})=>({start:typeof v=="string"?s[v]:v,end:typeof u=="string"?s[u]:u,color:b,name:m,type:y})).filter(({start:v,end:u})=>typeof v=="number"&&typeof u=="number"),l=a.filter(({type:v})=>v==="block"),h=xe(l,"start",Math.min,0),c=xe(l,"end",Math.max,0),d=xe(a,"start",Math.min,0),f=xe(a,"end",Math.max,0);return{intervals:a,textBlock:{start:h,end:c},name:e,timing:s,min:d,max:f,index:r,meta:n}}).filter(({intervals:e})=>e.length).sort((e,i)=>e.min-i.min||i.max-e.max),Ss=(t,e,i,s)=>s-(t-e)*i,Ts={fillColor:"rgba(0, 0, 0, 0.1)",lineWidth:1,lineDash:[],lineColor:"rgba(0, 0, 0, 0.5)",type:"smooth"},Lt=t=>{const e=[],i=t.map(o=>{var a;return{group:o.units&&!o.group?o.units:"default",...o,style:{lineWidth:1,fillColor:"rgba(0, 0, 0, 0.15)",lineColor:"rgba(0, 0, 0, 0.20)",lineDash:[],type:"smooth",...(a=o.style)!==null&&a!==void 0?a:{}}}}),s=i.reduce((o,{points:a,group:l,min:h,max:c},d)=>(o[l]||(o[l]={min:h??a[0][1],max:c??a[0][1]}),e[d]={start:a[0][0],end:G(a)[0]},a.forEach(([f,v])=>{h===void 0&&(o[l].min=Math.min(o[l].min,v)),c===void 0&&(o[l].max=Math.max(o[l].max,v)),e[d].start=Math.min(e[d].start,f),e[d].end=Math.max(e[d].end,f)}),o),{}),n=Math.min(...e.map(({start:o})=>o)),r=Math.max(...e.map(({end:o})=>o));return{summary:s,total:{min:n,max:r},timeseries:i,timeboxes:e}},Xt=(t,e,i)=>{var s,n;return e.dynamicMinMax?t.reduce((r,[,o])=>(r.min=Math.min(r.min,o),r.max=Math.max(r.max,o),r),{min:(s=e.min)!==null&&s!==void 0?s:1/0,max:(n=e.max)!==null&&n!==void 0?n:-1/0}):e.group?i[e.group]:{min:-1/0,max:1/0}},At=(t,{timeseries:e})=>{const i=e.reduce((s,{points:n,units:r,name:o,group:a})=>{const l=Ps(n,t),c=a!==r&&a!=="default"?a:"default";let d="";return l&&(o&&(d+=o+": "),d+=l[1].toFixed(2),r&&(d+=r)),s[c]||(s[c]=[]),s[c].push(d),s},{});return Object.entries(i).reduce((s,[n,r])=>(n!=="default"&&s.push({text:n,color:"black"}),r.forEach(o=>{s.push({text:o})}),s),[])},we=({engine:t,points:e,style:i,min:s,max:n})=>{const r={...Ts,...i??{}};t.setCtxValue("strokeStyle",r.lineColor),t.setCtxValue("fillStyle",r.fillColor),t.setCtxValue("lineWidth",r.lineWidth),t.callCtx("setLineDash",r.lineDash),t.ctx.beginPath();const o=(t.height-t.charHeight-4)/(n-s);if(e.length>1){const a=e.map(([l,h])=>[t.timeToPosition(l),Ss(h,s,o,t.height)]);if(t.ctx.moveTo(a[0][0],t.height),t.ctx.lineTo(a[0][0],a[0][1]),r.type==="smooth"||!r.type){for(let c=1;c<a.length-2;c++){const d=(a[c][0]+a[c+1][0])/2,f=(a[c][1]+a[c+1][1])/2;t.ctx.quadraticCurveTo(a[c][0],a[c][1],d,f)}const l=a[a.length-2],h=G(a);t.ctx.quadraticCurveTo(l[0],l[1],h[0],h[1]),t.ctx.quadraticCurveTo(h[0],h[1],h[0],t.height)}else if(r.type==="line")for(let l=1;l<a.length;l++)t.ctx.lineTo(a[l][0],a[l][1]);else if(r.type==="bar"){for(let l=0;l<a.length;l++){const h=a[l],c=a[l-1]||h,d=a[l+1],f=(h[0]-c[0])/2,v=d?(d[0]-h[0])/2:f;t.ctx.lineTo(c[0]+f,h[1]),t.ctx.lineTo(h[0]+v,h[1]),d?t.ctx.lineTo(h[0]+v,d[1]):t.ctx.lineTo(h[0]+v,t.height)}t.ctx.lineTo(G(a)[0],t.height)}}t.ctx.closePath(),t.ctx.stroke(),t.ctx.fill()},Ps=(t,e,i=!0)=>{if(t[0][0]>=e)return i?t[0]:null;if(G(t)[0]<=e)return i?G(t):null;if(t.length<=1)return t[0];let s=0,n=t.length-1;for(;s<=n;){const r=Math.ceil((n+s)/2);if(e>=t[r-1][0]&&e<=t[r][0]){const o=Math.abs(e-t[r-1][0])<Math.abs(e-t[r][0])?r-1:r;return t[o]}t[r][0]<e?s=r+1:n=r-1}return null},tt=2,it={font:"9px sans-serif",fontColor:"black",overlayColor:"rgba(112, 112, 112, 0.5)",graphStrokeColor:"rgba(0, 0, 0, 0.10)",graphFillColor:"rgba(0, 0, 0, 0.15)",flameChartGraphType:"smooth",waterfallStrokeOpacity:.4,waterfallFillOpacity:.35,waterfallGraphType:"smooth",bottomLineColor:"rgba(0, 0, 0, 0.25)",knobColor:"rgb(131, 131, 131)",knobStrokeColor:"white",knobSize:6,height:60,backgroundColor:"white"};class Hs extends ee{constructor({waterfall:e,flameChartNodes:i,timeseries:s,settings:n,name:r="timeframeSelectorPlugin"}){super(r),this.styles=it,this.height=0,this.leftKnobMoving=!1,this.rightKnobMoving=!1,this.selectingActive=!1,this.startSelectingPosition=0,this.actualClusters=[],this.clusters=[],this.flameChartMaxLevel=0,this.flameChartDots=[],this.waterfallDots=[],this.waterfallMaxLevel=0,this.actualClusterizedFlatTree=[],this.hoveredRegion=null,this.flameChartNodes=i,this.waterfall=e,this.timeseries=s,this.shouldRender=!0,this.setSettings(n)}init(e,i){super.init(e,i),this.interactionsEngine.on("down",this.handleMouseDown.bind(this)),this.interactionsEngine.on("up",this.handleMouseUp.bind(this)),this.interactionsEngine.on("move",this.handleMouseMove.bind(this)),this.interactionsEngine.on("hover",this.handleHover.bind(this)),this.setSettings()}handleHover(e){this.hoveredRegion=e}handleMouseDown(e,i){e&&(e.type==="timeframeKnob"?(e.data==="left"?this.leftKnobMoving=!0:this.rightKnobMoving=!0,this.interactionsEngine.setCursor("ew-resize")):e.type==="timeframeArea"&&(this.selectingActive=!0,this.startSelectingPosition=i.x))}handleMouseUp(e,i,s){let n=!1;if(this.timeout&&(n=!0),clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>this.timeout=void 0,300),this.leftKnobMoving=!1,this.rightKnobMoving=!1,this.interactionsEngine.clearCursor(),this.selectingActive&&!s&&this.applyChanges(),this.selectingActive=!1,s&&!n){const r=this.getRightKnobPosition(),o=this.getLeftKnobPosition();i.x>r?this.setRightKnobPosition(i.x):i.x>o&&i.x<r?i.x-o>r-i.x?this.setRightKnobPosition(i.x):this.setLeftKnobPosition(i.x):this.setLeftKnobPosition(i.x),this.applyChanges()}n&&(this.renderEngine.parent.setZoom(this.renderEngine.getInitialZoom()),this.renderEngine.parent.setPositionX(this.renderEngine.min),this.renderEngine.parent.render())}handleMouseMove(e,i){this.leftKnobMoving&&(this.setLeftKnobPosition(i.x),this.applyChanges()),this.rightKnobMoving&&(this.setRightKnobPosition(i.x),this.applyChanges()),this.selectingActive&&(this.startSelectingPosition>=i.x?(this.setLeftKnobPosition(i.x),this.setRightKnobPosition(this.startSelectingPosition)):(this.setRightKnobPosition(i.x),this.setLeftKnobPosition(this.startSelectingPosition)),this.renderEngine.render())}postInit(){this.offscreenRenderEngine=this.renderEngine.makeChild(),this.offscreenRenderEngine.setSettingsOverrides({styles:this.styles}),this.timeGrid=new Ht({styles:this.renderEngine.parent.timeGrid.styles}),this.timeGrid.setDefaultRenderEngine(this.offscreenRenderEngine),this.offscreenRenderEngine.on("resize",()=>{this.offscreenRenderEngine.setZoom(this.renderEngine.getInitialZoom()),this.offscreenRender()}),this.offscreenRenderEngine.on("min-max-change",()=>this.shouldRender=!0),this.setData({flameChartNodes:this.flameChartNodes,waterfall:this.waterfall,timeseries:this.timeseries})}setLeftKnobPosition(e){const i=this.getRightKnobPosition();if(e<i-1){const s=this.renderEngine.getRealView(),n=this.renderEngine.setPositionX(this.offscreenRenderEngine.pixelToTime(e)+this.renderEngine.min),r=this.renderEngine.width/(s-n);this.renderEngine.setZoom(r)}}setRightKnobPosition(e){const i=this.getLeftKnobPosition();if(e>i+1){const s=this.renderEngine.getRealView(),n=this.renderEngine.positionX+s-(this.offscreenRenderEngine.pixelToTime(e)+this.renderEngine.min),r=this.renderEngine.width/(s-n);this.renderEngine.setZoom(r)}}getLeftKnobPosition(){return(this.renderEngine.positionX-this.renderEngine.min)*this.renderEngine.getInitialZoom()}getRightKnobPosition(){return(this.renderEngine.positionX-this.renderEngine.min+this.renderEngine.getRealView())*this.renderEngine.getInitialZoom()}applyChanges(){this.renderEngine.parent.setPositionX(this.renderEngine.positionX),this.renderEngine.parent.setZoom(this.renderEngine.zoom),this.renderEngine.parent.render()}setSettings({styles:e}={styles:this.styles}){this.styles=N(it,e),this.height=this.styles.height,this.offscreenRenderEngine&&(this.offscreenRenderEngine.setSettingsOverrides({styles:this.styles}),this.timeGrid.setSettings({styles:this.renderEngine.parent.timeGrid.styles})),this.shouldRender=!0}makeFlameChartDots(){if(this.flameChartNodes){const e=[],i=kt(this.flameChartNodes),{min:s,max:n}=St(i);this.min=s,this.max=n,this.clusters=Tt(i,()=>!0),this.actualClusters=ze(this.clusters,this.renderEngine.zoom,this.min,this.max,tt,1/0),this.actualClusterizedFlatTree=Pt(this.actualClusters,this.renderEngine.zoom,this.min,this.max,tt,1/0).sort((a,l)=>a.start-l.start),this.actualClusterizedFlatTree.forEach(({start:a,end:l})=>{e.push({time:a,type:"start"},{time:l,type:"end"})}),e.sort((a,l)=>a.time-l.time);const{dots:r,maxLevel:o}=this.makeRenderDots(e);this.flameChartDots=r,this.flameChartMaxLevel=o}}makeRenderDots(e){const i=[];let s=0,n=0;return e.forEach(({type:r,time:o})=>{(r==="start"||r==="end")&&i.push([o,s]),r==="start"?s++:s--,n=Math.max(n,s),i.push([o,s])}),{dots:i,maxLevel:n}}makeWaterfallDots(){if(this.waterfall){const e=Ft(this.waterfall),s=Object.entries(e.reduce((r,{intervals:o})=>(o.forEach(a=>{r[a.color]||(r[a.color]=[]),r[a.color].push(a)}),r),{})).map(([r,o])=>{const a=[];return o.forEach(({start:l,end:h})=>{a.push({type:"start",time:l}),a.push({type:"end",time:h})}),a.sort((l,h)=>l.time-h.time),{color:r,points:a}});let n=0;this.waterfallDots=s.map(({color:r,points:o})=>{const{dots:a,maxLevel:l}=this.makeRenderDots(o);return n=Math.max(n,l),{color:r,dots:a}}),this.waterfallMaxLevel=n}}prepareTimeseries(){var e;!((e=this.timeseries)===null||e===void 0)&&e.length?this.preparedTimeseries=Lt(this.timeseries):this.preparedTimeseries=void 0}setData({flameChartNodes:e,waterfall:i,timeseries:s}){this.flameChartNodes=e,this.waterfall=i,this.timeseries=s,this.makeFlameChartDots(),this.makeWaterfallDots(),this.prepareTimeseries(),this.offscreenRender()}setTimeseries(e){this.timeseries=e,this.prepareTimeseries(),this.offscreenRender()}setFlameChartNodes(e){this.flameChartNodes=e,this.makeFlameChartDots(),this.offscreenRender()}setWaterfall(e){this.waterfall=e,this.makeWaterfallDots(),this.offscreenRender()}offscreenRender(){const e=this.offscreenRenderEngine.getInitialZoom();if(this.offscreenRenderEngine.setZoom(e),this.offscreenRenderEngine.setPositionX(this.offscreenRenderEngine.min),this.offscreenRenderEngine.clear(),this.timeGrid.recalc(),this.timeGrid.renderLines(0,this.offscreenRenderEngine.height),this.timeGrid.renderTimes(),we({engine:this.offscreenRenderEngine,points:this.flameChartDots,min:0,max:this.flameChartMaxLevel,style:{lineColor:this.styles.graphStrokeColor,fillColor:this.styles.graphFillColor,type:this.styles.flameChartGraphType}}),this.waterfallDots.forEach(({color:i,dots:s})=>{const n=new ke(i);we({engine:this.offscreenRenderEngine,points:s,min:0,max:this.waterfallMaxLevel,style:{lineColor:n.alpha(this.styles.waterfallStrokeOpacity).rgb().toString(),fillColor:n.alpha(this.styles.waterfallFillOpacity).rgb().toString(),type:this.styles.waterfallGraphType}})}),this.preparedTimeseries){const{summary:i,timeseries:s}=this.preparedTimeseries;s.forEach(n=>{const r=Xt(n.points,n,i);we({engine:this.offscreenRenderEngine,points:n.points,min:r.min,max:r.max,style:n.style})})}this.offscreenRenderEngine.setCtxValue("fillStyle",this.styles.bottomLineColor),this.offscreenRenderEngine.ctx.fillRect(0,this.height-1,this.offscreenRenderEngine.width,1)}renderTimeframe(){const e=this.renderEngine.positionX-this.renderEngine.min,i=e*this.renderEngine.getInitialZoom(),s=(e+this.renderEngine.getRealView())*this.renderEngine.getInitialZoom(),n=i-this.styles.knobSize/2,r=s-this.styles.knobSize/2,o=this.renderEngine.height/3;this.renderEngine.setCtxValue("fillStyle",this.styles.overlayColor),this.renderEngine.fillRect(0,0,i,this.renderEngine.height),this.renderEngine.fillRect(s,0,this.renderEngine.width-s,this.renderEngine.height),this.renderEngine.setCtxValue("fillStyle",this.styles.overlayColor),this.renderEngine.fillRect(i-1,0,1,this.renderEngine.height),this.renderEngine.fillRect(s+1,0,1,this.renderEngine.height),this.renderEngine.setCtxValue("fillStyle",this.styles.knobColor),this.renderEngine.fillRect(n,0,this.styles.knobSize,o),this.renderEngine.fillRect(r,0,this.styles.knobSize,o),this.renderEngine.renderStroke(this.styles.knobStrokeColor,n,0,this.styles.knobSize,o),this.renderEngine.renderStroke(this.styles.knobStrokeColor,r,0,this.styles.knobSize,o),this.interactionsEngine.addHitRegion("timeframeKnob","left",n,0,this.styles.knobSize,o,"ew-resize"),this.interactionsEngine.addHitRegion("timeframeKnob","right",r,0,this.styles.knobSize,o,"ew-resize"),this.interactionsEngine.addHitRegion("timeframeArea",null,0,0,this.renderEngine.width,this.renderEngine.height,"text")}renderTooltip(){if(this.hoveredRegion){const i=this.interactionsEngine.getMouse().x/this.renderEngine.getInitialZoom()+this.renderEngine.min,s=`${i.toFixed(this.renderEngine.getAccuracy()+2)} ${this.renderEngine.timeUnits}`,n=this.preparedTimeseries?At(i,this.preparedTimeseries):[];return this.renderEngine.renderTooltipFromData([{text:s},...n],this.interactionsEngine.getGlobalMouse()),!0}return!1}render(){return this.shouldRender&&(this.shouldRender=!1,this.offscreenRender()),this.renderEngine.copy(this.offscreenRenderEngine),this.renderTimeframe(),this.interactionsEngine.addHitRegion("timeframe",null,0,0,this.renderEngine.width,this.height),!0}}const He={defaultHeight:68};class Fs extends ee{constructor({data:e,name:i="waterfallPlugin",settings:s}){super(i),this.styles=He,this.height=He.defaultHeight,this.data=[],this.positionY=0,this.hoveredRegion=null,this.selectedRegion=null,this.initialData=[],this.setData(e),this.setSettings(s)}init(e,i){super.init(e,i),this.interactionsEngine.on("change-position",this.handlePositionChange.bind(this)),this.interactionsEngine.on("hover",this.handleHover.bind(this)),this.interactionsEngine.on("select",this.handleSelect.bind(this)),this.interactionsEngine.on("up",this.handleMouseUp.bind(this))}handlePositionChange({deltaX:e,deltaY:i}){const s=this.positionY,n=this.renderEngine.parent.positionX;this.interactionsEngine.setCursor("grabbing"),this.positionY+i>=0?this.setPositionY(this.positionY+i):this.setPositionY(0),this.renderEngine.tryToChangePosition(e),(n!==this.renderEngine.parent.positionX||s!==this.positionY)&&this.renderEngine.parent.render()}handleMouseUp(){this.interactionsEngine.clearCursor()}handleHover(e){this.hoveredRegion=e}handleSelect(e){this.selectedRegion!==e&&(this.selectedRegion=e,this.emit("select",{node:e!=null&&e.data?this.initialData[e.data]:null,type:"waterfall-node"}),this.renderEngine.render())}setPositionY(e){this.positionY=e}setSettings({styles:e}){this.styles=N(He,e),this.height=this.styles.defaultHeight,this.positionY=0}setData(e){this.positionY=0,this.initialData=e.items,this.data=Ft(e),e.items.length&&(this.min=this.data.reduce((i,{min:s})=>Math.min(i,s),this.data[0].min),this.max=this.data.reduce((i,{max:s})=>Math.max(i,s),this.data[0].max)),this.renderEngine&&(this.renderEngine.recalcMinMax(),this.renderEngine.resetParentView())}calcRect(e,i,s){const n=i*this.renderEngine.zoom;return{x:this.renderEngine.timeToPosition(e),w:s?n<=.1?.1:n>=3?n-1:n-n/3:n}}renderTooltip(){if(this.hoveredRegion){if(this.renderEngine.options.tooltip===!1)return!0;if(typeof this.renderEngine.options.tooltip=="function"){const{data:e}=this.hoveredRegion,i={...this.hoveredRegion};i.data=this.data.find(({index:s})=>e===s),this.renderEngine.options.tooltip(i,this.renderEngine,this.interactionsEngine.getGlobalMouse())}else{const{data:e}=this.hoveredRegion,i=this.data.find(({index:s})=>e===s);if(i){const{name:s,intervals:n,timing:r,meta:o=[]}=i,a=this.renderEngine.getTimeUnits(),l=this.renderEngine.getAccuracy()+2,h={text:`${s}`},c={text:"intervals",color:this.renderEngine.styles.tooltipHeaderFontColor},d=n.map(({name:y,start:m,end:g})=>({text:`${y}: ${(g-m).toFixed(l)} ${a}`})),f={text:"timing",color:this.renderEngine.styles.tooltipHeaderFontColor},v=Object.entries(r).filter(([,y])=>typeof y=="number").map(([y,m])=>({text:`${y}: ${m.toFixed(l)} ${a}`})),u={text:"meta",color:this.renderEngine.styles.tooltipHeaderFontColor},b=o?o.map(({name:y,value:m,color:g})=>({text:`${y}: ${m}`,color:g})):[];this.renderEngine.renderTooltipFromData([h,c,...d,f,...v,...b.length?[u,...b]:[]],this.interactionsEngine.getGlobalMouse())}}return!0}return!1}render(){const e=this.renderEngine.positionX+this.renderEngine.getRealView(),i=this.renderEngine.positionX,s=this.renderEngine.blockHeight+1,n=[];this.data.filter(({min:o,max:a})=>!(e<o&&e<a||i>a&&e>o)).map(o=>{for(;n.length&&o.min-G(n).max>0;)n.pop();const a=n.length,l={...o,level:a};return n.push(o),l}).forEach(({name:o,intervals:a,textBlock:l,level:h,index:c})=>{const d=h*s-this.positionY;if(d+s>=0&&d-s<=this.renderEngine.height){const f=this.renderEngine.timeToPosition(l.start),v=this.renderEngine.timeToPosition(l.end);this.renderEngine.addTextToRenderQueue(o,f,d,v-f);const{x:u,w:b}=a.reduce((y,{color:m,start:g,end:w,type:F},R)=>{const{x:le,w:Oe}=this.calcRect(g,w-g,R===a.length-1);return F==="block"&&this.renderEngine.addRectToRenderQueue(m,le,d,Oe),{x:y.x===null?le:y.x,w:Oe+y.w}},{x:null,w:0});this.selectedRegion&&this.selectedRegion.type==="waterfall-node"&&this.selectedRegion.data===c&&this.renderEngine.addStrokeToRenderQueue("green",u??0,d,b,this.renderEngine.blockHeight),this.interactionsEngine.addHitRegion("waterfall-node",c,u??0,d,b,this.renderEngine.blockHeight)}},0)}}const st={height:16,color:"rgb(202,202,202, 0.25)",strokeColor:"rgb(138,138,138, 0.50)",dotsColor:"rgb(97,97,97)",fontColor:"black",font:"10px sans-serif",triangleWidth:10,triangleHeight:7,triangleColor:"black",leftPadding:10};class nt extends ee{constructor(e,i){super("togglePlugin"),this.styles=st,this.height=0,this.resizeActive=!1,this.resizeStartHeight=0,this.resizeStartPosition=0,this.setSettings(i),this.title=e}setSettings({styles:e}={}){this.styles=N(st,e),this.height=this.styles.height+1}init(e,i){super.init(e,i),this.getNextEngine().setFlexible(),this.interactionsEngine.on("click",n=>{if(n&&n.type==="toggle"&&n.data===this.renderEngine.id){const r=this.getNextEngine();r.collapsed?r.expand():r.collapse(),this.renderEngine.parent.recalcChildrenSizes(),this.renderEngine.parent.render()}}),this.interactionsEngine.on("down",n=>{if(n&&n.type==="knob-resize"&&n.data===this.renderEngine.id){const r=this.getPrevEngine();this.interactionsEngine.setCursor("row-resize"),this.resizeActive=!0,this.resizeStartHeight=r.height,this.resizeStartPosition=this.interactionsEngine.getGlobalMouse().y}}),this.interactionsEngine.parent.on("move",()=>{if(this.resizeActive){const n=this.getPrevEngine(),r=this.interactionsEngine.getGlobalMouse();if(n.flexible){const o=this.resizeStartHeight-(this.resizeStartPosition-r.y);o<=0?(n.collapse(),n.resize({height:0})):(n.collapsed&&n.expand(),n.resize({height:o})),this.renderEngine.parent.render()}}}),this.interactionsEngine.parent.on("up",()=>{this.interactionsEngine.clearCursor(),this.resizeActive=!1})}getPrevEngine(){var e;const i=((e=this.renderEngine.id)!==null&&e!==void 0?e:0)-1;return this.renderEngine.parent.children[i]}getNextEngine(){var e;const i=((e=this.renderEngine.id)!==null&&e!==void 0?e:0)+1;return this.renderEngine.parent.children[i]}render(){const e=this.getNextEngine(),i=this.getPrevEngine(),s=this.styles.leftPadding+this.styles.triangleWidth,n=this.renderEngine.width/2,r=this.styles.height/2;this.renderEngine.setCtxFont(this.styles.font),this.renderEngine.setCtxValue("fillStyle",this.styles.color),this.renderEngine.setCtxValue("strokeStyle",this.styles.strokeColor),this.renderEngine.fillRect(0,0,this.renderEngine.width,this.styles.height),this.renderEngine.setCtxValue("fillStyle",this.styles.fontColor),this.renderEngine.addTextToRenderQueue(this.title,s,0,this.renderEngine.width),this.renderEngine.renderTriangle(this.styles.triangleColor,this.styles.leftPadding,this.styles.height/2,this.styles.triangleWidth,this.styles.triangleHeight,e.collapsed?"right":"bottom");const{width:o}=this.renderEngine.ctx.measureText(this.title),a=o+s;this.interactionsEngine.addHitRegion("toggle",this.renderEngine.id,0,0,a,this.styles.height,"pointer"),i.flexible&&(this.renderEngine.renderCircle(this.styles.dotsColor,n,r,1.5),this.renderEngine.renderCircle(this.styles.dotsColor,n-10,r,1.5),this.renderEngine.renderCircle(this.styles.dotsColor,n+10,r,1.5),this.interactionsEngine.addHitRegion("knob-resize",this.renderEngine.id,a,0,this.renderEngine.width-a,this.styles.height,"row-resize"))}}const rt=`QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm1234567890_-+()[]{}\\/|'";:.,?~`,Ls=()=>{const t=navigator.userAgent.toLowerCase();return t.includes("safari")?!t.includes("chrome"):!1};function Xs(t){const e=t,i=window.devicePixelRatio||1,s=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/s}const ot={tooltip:void 0,timeUnits:"ms"},at={blockHeight:16,blockPaddingLeftRight:4,backgroundColor:"white",font:"10px sans-serif",fontColor:"black",tooltipHeaderFontColor:"black",tooltipBodyFontColor:"#688f45",tooltipBackgroundColor:"white",tooltipShadowColor:"black",tooltipShadowBlur:6,tooltipShadowOffsetX:0,tooltipShadowOffsetY:0,headerHeight:14,headerColor:"rgba(112, 112, 112, 0.25)",headerStrokeColor:"rgba(112, 112, 112, 0.5)",headerTitleLeftPadding:16};class Yt extends ue.EventEmitter{constructor(e,i){super(),this.options=ot,this.timeUnits="ms",this.styles=at,this.blockPaddingLeftRight=0,this.blockHeight=0,this.blockPaddingTopBottom=0,this.charHeight=0,this.placeholderWidth=0,this.avgCharWidth=0,this.minTextWidth=0,this.textRenderQueue=[],this.strokeRenderQueue=[],this.rectRenderQueue={},this.zoom=0,this.positionX=0,this.min=0,this.max=0,this.ctxCachedSettings={},this.ctxCachedCalls={},this.setCtxValue=(s,n)=>{this.ctxCachedSettings[s]!==n&&(this.ctx[s]=n,this.ctxCachedSettings[s]=n)},this.callCtx=(s,n)=>{(!this.ctxCachedCalls[s]||this.ctxCachedCalls[s]!==n)&&(this.ctx[s](n),this.ctxCachedCalls[s]=n)},this.width=e.width,this.height=e.height,this.isSafari=Ls(),this.canvas=e,this.ctx=e.getContext("2d",{alpha:!1}),this.pixelRatio=Xs(this.ctx),this.setSettings(i),this.applyCanvasSize(),this.reset()}setSettings({options:e,styles:i}){this.options=N(ot,e),this.styles=N(at,i),this.timeUnits=this.options.timeUnits,this.blockHeight=this.styles.blockHeight,this.ctx.font=this.styles.font;const{actualBoundingBoxAscent:s,actualBoundingBoxDescent:n,width:r}=this.ctx.measureText(rt),{width:o}=this.ctx.measureText(""),a=s+n;this.blockPaddingLeftRight=this.styles.blockPaddingLeftRight,this.blockPaddingTopBottom=Math.ceil((this.blockHeight-a)/2),this.charHeight=a+1,this.placeholderWidth=o,this.avgCharWidth=r/rt.length,this.minTextWidth=this.avgCharWidth+this.placeholderWidth}reset(){this.textRenderQueue=[],this.strokeRenderQueue=[],this.rectRenderQueue={},this.ctxCachedCalls={},this.ctxCachedSettings={}}setCtxShadow(e){var i,s;this.setCtxValue("shadowBlur",e.blur),this.setCtxValue("shadowColor",e.color),this.setCtxValue("shadowOffsetY",(i=e.offsetY)!==null&&i!==void 0?i:0),this.setCtxValue("shadowOffsetX",(s=e.offsetX)!==null&&s!==void 0?s:0)}setCtxFont(e){e&&this.ctx.font!==e&&(this.ctx.font=e)}fillRect(e,i,s,n){this.ctx.fillRect(e,i,s,n)}fillText(e,i,s){this.ctx.fillText(e,i,s)}renderBlock(e,i,s,n){this.setCtxValue("fillStyle",e),this.ctx.fillRect(i,s,n,this.blockHeight)}renderStroke(e,i,s,n,r){this.setCtxValue("strokeStyle",e),this.ctx.setLineDash([]),this.ctx.strokeRect(i,s,n,r)}clear(e=this.width,i=this.height,s=0,n=0){this.setCtxValue("fillStyle",this.styles.backgroundColor),this.ctx.clearRect(s,n,e,i-1),this.ctx.fillRect(s,n,e,i),this.ctxCachedCalls={},this.ctxCachedSettings={},this.emit("clear")}timeToPosition(e){return e*this.zoom-this.positionX*this.zoom}pixelToTime(e){return e/this.zoom}setZoom(e){this.zoom=e}setPositionX(e){const i=this.positionX;return this.positionX=e,e-i}addRectToRenderQueue(e,i,s,n){this.rectRenderQueue[e]||(this.rectRenderQueue[e]=[]),this.rectRenderQueue[e].push({x:i,y:s,w:n})}addTextToRenderQueue(e,i,s,n){if(e){const r=n-(this.blockPaddingLeftRight*2-(i<0?i:0));r>0&&this.textRenderQueue.push({text:e,x:i,y:s,w:n,textMaxWidth:r})}}addStrokeToRenderQueue(e,i,s,n,r){this.strokeRenderQueue.push({color:e,x:i,y:s,w:n,h:r})}resolveRectRenderQueue(){Object.entries(this.rectRenderQueue).forEach(([e,i])=>{this.setCtxValue("fillStyle",e),i.forEach(({x:s,y:n,w:r})=>this.renderBlock(e,s,n,r))}),this.rectRenderQueue={}}resolveTextRenderQueue(){this.setCtxValue("fillStyle",this.styles.fontColor),this.textRenderQueue.forEach(({text:e,x:i,y:s,textMaxWidth:n})=>{const{width:r}=this.ctx.measureText(e);if(r>n){const o=r/e.length,l=(Math.floor((n-this.placeholderWidth)/o)-1)/2;l>0?e=e.slice(0,Math.ceil(l))+""+e.slice(e.length-Math.floor(l),e.length):e=""}e&&this.ctx.fillText(e,(i<0?0:i)+this.blockPaddingLeftRight,s+this.blockHeight-this.blockPaddingTopBottom)}),this.textRenderQueue=[]}resolveStrokeRenderQueue(){this.strokeRenderQueue.forEach(({color:e,x:i,y:s,w:n,h:r})=>{this.renderStroke(e,i,s,n,r)}),this.strokeRenderQueue=[]}setMinMax(e,i){const s=e!==this.min||i!==this.max;this.min=e,this.max=i,s&&this.emit("min-max-change",e,i)}getTimeUnits(){return this.timeUnits}tryToChangePosition(e){const i=this.getRealView();this.positionX+e+i<=this.max&&this.positionX+e>=this.min?this.setPositionX(this.positionX+e):this.positionX+e<=this.min?this.setPositionX(this.min):this.positionX+e+i>=this.max&&this.setPositionX(this.max-i)}getInitialZoom(){return this.max-this.min>0?this.width/(this.max-this.min):1}getRealView(){return this.width/this.zoom}resetView(){this.setZoom(this.getInitialZoom()),this.setPositionX(this.min)}resize(e,i){const s=typeof e=="number"&&this.width!==e,n=typeof i=="number"&&this.height!==i;return s||n?(this.width=s?e:this.width,this.height=n?i:this.height,this.applyCanvasSize(),this.emit("resize",{width:this.width,height:this.height}),n):!1}applyCanvasSize(){this.canvas.style.backgroundColor="white",this.canvas.style.overflow="hidden",this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.ctx.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.ctx.font=this.styles.font}copy(e){const i=this.isSafari?1:e.pixelRatio;e.canvas.height&&this.ctx.drawImage(e.canvas,0,0,e.canvas.width*i,e.canvas.height*i,0,e.position||0,e.width*i,e.height*i)}renderTooltipFromData(e,i){const s=i.x+10,n=i.y+10,o=e.map(({text:a})=>a).map(a=>this.ctx.measureText(a)).reduce((a,{width:l})=>Math.max(a,l),0)+this.blockPaddingLeftRight*2;this.setCtxShadow({color:this.styles.tooltipShadowColor,blur:this.styles.tooltipShadowBlur,offsetX:this.styles.tooltipShadowOffsetX,offsetY:this.styles.tooltipShadowOffsetY}),this.setCtxValue("fillStyle",this.styles.tooltipBackgroundColor),this.ctx.fillRect(s,n,o+this.blockPaddingLeftRight*2,(this.charHeight+2)*e.length+this.blockPaddingLeftRight*2),this.setCtxShadow({color:"transparent",blur:0}),e.forEach(({text:a,color:l},h)=>{l?this.setCtxValue("fillStyle",l):h?this.setCtxValue("fillStyle",this.styles.tooltipBodyFontColor):this.setCtxValue("fillStyle",this.styles.tooltipHeaderFontColor),this.ctx.fillText(a,s+this.blockPaddingLeftRight,n+this.blockHeight-this.blockPaddingTopBottom+(this.charHeight+2)*h)})}renderShape(e,i,s,n){this.setCtxValue("fillStyle",e),this.ctx.beginPath(),this.ctx.moveTo(i[0].x+s,i[0].y+n),i.slice(1).forEach(({x:r,y:o})=>this.ctx.lineTo(r+s,o+n)),this.ctx.closePath(),this.ctx.fill()}renderTriangle(e,i,s,n,r,o){const a=r/2,l=n/2;let h;switch(o){case"top":h=[{x:0-l,y:a},{x:0,y:0-a},{x:l,y:a}];break;case"right":h=[{x:0-a,y:0-l},{x:0-a,y:l},{x:a,y:0}];break;case"bottom":h=[{x:0-l,y:0-a},{x:l,y:0-a},{x:0,y:a}];break;case"left":h=[{x:a,y:0-l},{x:a,y:l},{x:0-a,y:0}];break}this.renderShape(e,h,i,s)}renderCircle(e,i,s,n){this.ctx.beginPath(),this.ctx.arc(i,s,n,0,2*Math.PI,!1),this.setCtxValue("fillStyle",e),this.ctx.fill()}}class $e extends Yt{constructor({width:e,height:i,parent:s,id:n}){const r=document.createElement("canvas");r.width=e,r.height=i,super(r,{options:s.options,styles:s.styles}),this.flexible=!1,this.collapsed=!1,this.position=0,this.width=e,this.height=i,this.parent=s,this.id=n,this.children=[],this.applyCanvasSize()}makeChild(){const e=new $e({width:this.width,height:this.height,parent:this.parent,id:void 0});return this.children.push(e),e.setMinMax(this.min,this.max),e.resetView(),e}setFlexible(){this.flexible=!0}collapse(){this.collapsed=!0,this.clear()}expand(){this.collapsed=!1}setSettingsOverrides(e){this.setSettings({styles:N(this.styles,e.styles),options:N(this.options,e.options)}),this.children.forEach(i=>i.setSettingsOverrides(e))}resize({width:e,height:i,position:s},n){const r=super.resize(e,i);!n&&r&&this.parent.recalcChildrenSizes(),typeof s=="number"&&(this.position=s),this.children.forEach(o=>o.resize({width:e,height:i,position:s}))}setMinMax(e,i){super.setMinMax(e,i),this.children.forEach(s=>s.setMinMax(e,i))}setSettings(e){super.setSettings(e),this.children&&this.children.forEach(i=>i.setSettings(e))}tryToChangePosition(e){this.parent.tryToChangePosition(e)}recalcMinMax(){this.parent.calcMinMax()}getTimeUnits(){return this.parent.getTimeUnits()}getAccuracy(){return this.parent.timeGrid.accuracy}renderTimeGrid(){this.parent.timeGrid.renderLines(0,this.height,this)}renderTimeGridTimes(){this.parent.timeGrid.renderTimes(this)}standardRender(){this.resolveRectRenderQueue(),this.resolveTextRenderQueue(),this.resolveStrokeRenderQueue(),this.renderTimeGrid()}renderTooltipFromData(e,i){this.parent.renderTooltipFromData(e,i)}resetParentView(){this.parent.resetView(),this.parent.render()}render(){this.parent.partialRender(this.id)}}const As=6;class Ys extends Yt{constructor({canvas:e,settings:i,timeGrid:s,plugins:n}){super(e,i),this.freeSpace=0,this.lastPartialAnimationFrame=null,this.lastGlobalAnimationFrame=null,this.plugins=n,this.children=[],this.requestedRenders=[],this.timeGrid=s,this.timeGrid.setDefaultRenderEngine(this)}makeInstance(){const e=new $e({width:this.width,height:0,id:this.children.length,parent:this});return e.setMinMax(this.min,this.max),e.resetView(),this.children.push(e),e}calcMinMax(){const e=this.plugins.map(({min:s})=>s).filter(Ze).reduce((s,n)=>Math.min(s,n)),i=this.plugins.map(({max:s})=>s).filter(Ze).reduce((s,n)=>Math.max(s,n));this.setMinMax(e,i)}calcTimeGrid(){this.timeGrid.recalc()}setMinMax(e,i){super.setMinMax(e,i),this.children.forEach(s=>s.setMinMax(e,i))}setSettings(e){super.setSettings(e),this.children&&(this.children.forEach(i=>i.setSettings(e)),this.recalcChildrenSizes())}resize(e,i){const s=this.width;return super.resize(e,i),this.recalcChildrenSizes(),this.getInitialZoom()>this.zoom?this.resetView():this.positionX>this.min&&this.tryToChangePosition(-this.pixelToTime((e-s)/2)),!0}recalcChildrenSizes(){const e=this.getChildrenSizes();this.freeSpace=e.reduce((i,{height:s})=>i-s,this.height),this.children.forEach((i,s)=>{i.resize(e[s],!0)})}getChildrenSizes(){const i=this.children.map((o,a)=>a).map(o=>{const a=this.plugins[o];return this.children[o].flexible&&a.height?"flexibleStatic":a.height?"static":"flexibleGrowing"}),s=i.reduce((o,a,l)=>{var h,c;const d=this.plugins[l],f=this.children[l];return f.collapsed?o:a==="flexibleGrowing"?o-(f.height||0):a==="flexibleStatic"?o-((f==null?void 0:f.height)||(d==null?void 0:d.height)||0):a==="static"?o-((c=(h=this.plugins[l])===null||h===void 0?void 0:h.height)!==null&&c!==void 0?c:0):o},this.height),n=i.filter(o=>o==="flexibleGrowing").length,r=Math.floor(s/n);return i.reduce((o,a,l)=>{var h,c;const d=this.children[l],f=this.plugins[l];let v=0;if(d.collapsed)v=0;else switch(a){case"static":v=(h=f.height)!==null&&h!==void 0?h:0;break;case"flexibleGrowing":v=(d.height||0)+r;break;case"flexibleStatic":v=(c=d.height||this.plugins[l].height)!==null&&c!==void 0?c:0;break}return o.result.push({width:this.width,position:o.position,height:v}),o.position+=v,o},{position:0,result:[]}).result}getAccuracy(){return this.timeGrid.accuracy}setZoom(e){return this.getAccuracy()<As||e<=this.zoom?(super.setZoom(e),this.children.forEach(i=>i.setZoom(e)),!0):!1}setPositionX(e){const i=super.setPositionX(e);return this.children.forEach(s=>s.setPositionX(e)),i}renderPlugin(e){var i;const s=this.plugins[e],n=this.children[e];n==null||n.clear(),n.collapsed||!((i=s==null?void 0:s.render)===null||i===void 0)&&i.call(s)||n.standardRender()}partialRender(e){typeof e=="number"&&this.requestedRenders.push(e),this.lastPartialAnimationFrame||(this.lastPartialAnimationFrame=requestAnimationFrame(()=>{this.requestedRenders.forEach(i=>this.renderPlugin(i)),this.shallowRender(),this.requestedRenders=[],this.lastPartialAnimationFrame=null}))}shallowRender(){this.clear(),this.timeGrid.renderLines(this.height-this.freeSpace,this.freeSpace),this.children.forEach(i=>{i.collapsed||this.copy(i)});let e=!1;this.plugins.forEach(i=>{i.postRender&&i.postRender()}),this.plugins.forEach(i=>{i.renderTooltip&&(e=e||!!i.renderTooltip())}),!e&&typeof this.options.tooltip=="function"&&this.options.tooltip(null,this,null)}render(e){typeof this.lastPartialAnimationFrame=="number"&&cancelAnimationFrame(this.lastPartialAnimationFrame),this.requestedRenders=[],this.lastPartialAnimationFrame=null,this.lastGlobalAnimationFrame||(this.lastGlobalAnimationFrame=requestAnimationFrame(()=>{e==null||e(),this.timeGrid.recalc(),this.children.forEach((i,s)=>this.renderPlugin(s)),this.shallowRender(),this.lastGlobalAnimationFrame=null}))}}const Ws=["down","up","move","click","select"];class de extends ue.EventEmitter{static getId(){return de.count++}constructor(e,i){super(),this.id=de.getId(),this.parent=e,this.renderEngine=i,i.on("clear",()=>this.clearHitRegions()),Ws.forEach(s=>e.on(s,(n,r,o)=>{(!n||n.id===this.id)&&this.resend(s,n,r,o)})),["hover"].forEach(s=>e.on(s,(n,r)=>{(!n||n.id===this.id)&&this.emit(s,n,r)})),e.on("change-position",(s,n,r,o)=>{o===this&&this.emit("change-position",s,n,r)}),this.hitRegions=[]}resend(e,...i){this.renderEngine.position<=this.parent.mouse.y&&this.renderEngine.height+this.renderEngine.position>=this.parent.mouse.y&&this.emit(e,...i)}getMouse(){const{x:e,y:i}=this.parent.mouse;return{x:e,y:i-this.renderEngine.position}}getGlobalMouse(){return this.parent.mouse}clearHitRegions(){this.hitRegions=[]}addHitRegion(e,i,s,n,r,o,a){this.hitRegions.push({type:e,data:i,x:s,y:n,w:r,h:o,cursor:a,id:this.id})}setCursor(e){this.parent.setCursor(e)}clearCursor(){this.parent.clearCursor()}}de.count=0;class Ds extends ue.EventEmitter{constructor(e,i){super(),this.selectedRegion=null,this.hoveredRegion=null,this.moveActive=!1,this.currentCursor=null,this.renderEngine=i,this.canvas=e,this.hitRegions=[],this.instances=[],this.mouse={x:0,y:0},this.handleMouseWheel=this.handleMouseWheel.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.initListeners(),this.reset()}makeInstance(e){const i=new de(this,e);return this.instances.push(i),i}reset(){this.selectedRegion=null,this.hoveredRegion=null,this.hitRegions=[]}destroy(){this.removeListeners()}initListeners(){this.canvas&&(this.canvas.addEventListener("wheel",this.handleMouseWheel),this.canvas.addEventListener("mousedown",this.handleMouseDown),this.canvas.addEventListener("mouseup",this.handleMouseUp),this.canvas.addEventListener("mouseleave",this.handleMouseUp),this.canvas.addEventListener("mousemove",this.handleMouseMove))}removeListeners(){this.canvas&&(this.canvas.removeEventListener("wheel",this.handleMouseWheel),this.canvas.removeEventListener("mousedown",this.handleMouseDown),this.canvas.removeEventListener("mouseup",this.handleMouseUp),this.canvas.removeEventListener("mouseleave",this.handleMouseUp),this.canvas.removeEventListener("mousemove",this.handleMouseMove))}handleMouseWheel(e){const{deltaY:i,deltaX:s}=e;e.preventDefault();const n=this.renderEngine.getRealView(),r=this.renderEngine.getInitialZoom(),o=this.renderEngine.positionX,a=this.renderEngine.zoom,l=s/this.renderEngine.zoom;let h=i/1e3*this.renderEngine.zoom;if(this.renderEngine.tryToChangePosition(l),h=this.renderEngine.zoom-h>=r?h:this.renderEngine.zoom-r,h!==0&&this.renderEngine.setZoom(this.renderEngine.zoom-h)){const d=this.mouse.x/this.renderEngine.width,v=(n-this.renderEngine.width/this.renderEngine.zoom)*d;this.renderEngine.tryToChangePosition(v)}this.checkRegionHover(),(o!==this.renderEngine.positionX||a!==this.renderEngine.zoom)&&this.renderEngine.render()}handleMouseDown(){this.moveActive=!0,this.mouseDownPosition={x:this.mouse.x,y:this.mouse.y},this.mouseDownHoveredInstance=this.hoveredInstance,this.emit("down",this.hoveredRegion,this.mouse)}handleMouseUp(){this.moveActive=!1;const e=this.mouseDownPosition&&this.mouseDownPosition.x===this.mouse.x&&this.mouseDownPosition.y===this.mouse.y;e&&this.handleRegionHit(),this.emit("up",this.hoveredRegion,this.mouse,e),e&&this.emit("click",this.hoveredRegion,this.mouse)}handleMouseMove(e){if(this.moveActive){const i=this.mouse.y-e.offsetY,s=(this.mouse.x-e.offsetX)/this.renderEngine.zoom;(i||s)&&this.emit("change-position",{deltaX:s,deltaY:i},this.mouseDownPosition,this.mouse,this.mouseDownHoveredInstance)}this.mouse.x=e.offsetX,this.mouse.y=e.offsetY,this.checkRegionHover(),this.emit("move",this.hoveredRegion,this.mouse)}handleRegionHit(){const e=this.getHoveredRegion();this.emit("select",e,this.mouse)}checkRegionHover(){const e=this.getHoveredRegion();e&&this.hoveredRegion&&e.id!==this.hoveredRegion.id&&this.emit("hover",null,this.mouse),e?(!this.currentCursor&&e.cursor?this.renderEngine.canvas.style.cursor=e.cursor:this.currentCursor||this.clearCursor(),this.hoveredRegion=e,this.emit("hover",e,this.mouse),this.renderEngine.partialRender()):this.hoveredRegion&&!e&&(this.currentCursor||this.clearCursor(),this.hoveredRegion=null,this.emit("hover",null,this.mouse),this.renderEngine.partialRender())}getHoveredRegion(){const e=this.hitRegions.find(({x:s,y:n,w:r,h:o})=>this.mouse.x>=s&&this.mouse.x<=s+r&&this.mouse.y>=n&&this.mouse.y<=n+o);if(e)return e;const i=this.instances.find(({renderEngine:s})=>s.position<=this.mouse.y&&s.height+s.position>=this.mouse.y);if(this.hoveredInstance=i,i){const s=i.renderEngine.position;return i.hitRegions.find(({x:n,y:r,w:o,h:a})=>this.mouse.x>=n&&this.mouse.x<=n+o&&this.mouse.y>=r+s&&this.mouse.y<=r+a+s)}return null}clearHitRegions(){this.hitRegions=[]}addHitRegion(e,i,s,n,r,o,a){this.hitRegions.push({type:e,data:i,x:s,y:n,w:r,h:o,cursor:a})}setCursor(e){this.renderEngine.canvas.style.cursor=e,this.currentCursor=e}clearCursor(){const e=this.getHoveredRegion();this.currentCursor=null,e!=null&&e.cursor?this.renderEngine.canvas.style.cursor=e.cursor:this.renderEngine.canvas.style.cursor=""}}class zs extends ue.EventEmitter{constructor({canvas:e,plugins:i,settings:s}){var n;super();const r=(n=s==null?void 0:s.styles)!==null&&n!==void 0?n:{};this.timeGrid=new Ht({styles:r==null?void 0:r.timeGrid}),this.renderEngine=new Ys({canvas:e,settings:{styles:r==null?void 0:r.main,options:s==null?void 0:s.options},plugins:i,timeGrid:this.timeGrid}),this.interactionsEngine=new Ds(e,this.renderEngine),this.plugins=i;const o=Array(this.plugins.length).fill(null).map(()=>{const a=this.renderEngine.makeInstance(),l=this.interactionsEngine.makeInstance(a);return{renderEngine:a,interactionsEngine:l}});this.plugins.forEach((a,l)=>{a.init(o[l].renderEngine,o[l].interactionsEngine)}),this.renderEngine.calcMinMax(),this.renderEngine.resetView(),this.renderEngine.recalcChildrenSizes(),this.renderEngine.calcTimeGrid(),this.plugins.forEach(a=>{var l;return(l=a.postInit)===null||l===void 0?void 0:l.call(a)}),this.renderEngine.render()}render(){this.renderEngine.render()}resize(e,i){this.renderEngine.render(()=>this.renderEngine.resize(e,i))}execOnPlugins(e,...i){let s=0;for(;s<this.plugins.length;)this.plugins[s][e]&&this.plugins[s][e](...i),s++}setSettings(e){var i,s;this.timeGrid.setSettings({styles:(i=e.styles)===null||i===void 0?void 0:i.timeGrid}),this.renderEngine.setSettings({options:e.options,styles:(s=e.styles)===null||s===void 0?void 0:s.main}),this.plugins.forEach(n=>{var r,o;return(r=n.setSettings)===null||r===void 0?void 0:r.call(n,{styles:(o=e.styles)===null||o===void 0?void 0:o[n.name]})}),this.renderEngine.render()}setZoom(e,i){const s=this.renderEngine.width/(i-e);this.renderEngine.setPositionX(e),this.renderEngine.setZoom(s),this.renderEngine.render()}}const $s={height:56},lt=2;class Is extends ee{constructor({name:e="timeseriesPlugin",data:i,settings:s}){super(e),this.height=56,this.hoveredRegion=null,this.setSettings(s),this.setData(i)}init(e,i){super.init(e,i),this.interactionsEngine.on("change-position",this.handlePositionChange.bind(this)),this.interactionsEngine.on("hover",this.handleHover.bind(this)),this.interactionsEngine.on("up",this.handleMouseUp.bind(this))}handlePositionChange(e){const i=this.renderEngine.parent.positionX;this.interactionsEngine.setCursor("grabbing"),this.renderEngine.tryToChangePosition(e.deltaX),i!==this.renderEngine.parent.positionX&&this.renderEngine.parent.render()}handleMouseUp(){this.interactionsEngine.clearCursor()}setSettings({styles:e}={styles:this.styles}){this.styles=N($s,e),this.height=this.styles.height}setData(e){const i=Lt(e);this.data=i,this.min=i.total.min,this.max=i.total.max,this.renderEngine&&(this.renderEngine.recalcMinMax(),this.renderEngine.resetParentView())}handleHover(e){this.hoveredRegion=e}renderTooltip(){if(this.hoveredRegion){const e=this.interactionsEngine.getMouse().x,i=this.renderEngine.pixelToTime(e)+this.renderEngine.positionX,s=`${i.toFixed(this.renderEngine.getAccuracy()+2)} ${this.renderEngine.timeUnits}`,n=At(i,this.data);return this.renderEngine.renderTooltipFromData([{text:s},...n],this.interactionsEngine.getGlobalMouse()),!0}return!1}render(){if(this.data.timeseries.length===0)return;const e=this.renderEngine.positionX,i=this.renderEngine.positionX+this.renderEngine.getRealView();this.data.timeseries.forEach((s,n)=>{if(this.data.timeboxes[n].end<e||this.data.timeboxes[n].start>i)return;const r=e<=this.data.timeboxes[n].start?0:Math.max(s.points.findIndex(([h])=>h>=e)-lt,0),o=i>=this.data.timeboxes[n].end?s.points.length:s.points.findIndex(([h])=>h>=i)+lt,a=s.points.slice(r,o),l=Xt(a,s,this.data.summary);we({engine:this.renderEngine,points:a,min:l.min,max:l.max,style:s.style})}),this.interactionsEngine.addHitRegion("timeseries",null,0,0,this.renderEngine.width,this.height)}}const Os={};class Ns extends zs{constructor({canvas:e,data:i,marks:s,waterfall:n,timeframeTimeseries:r,timeseries:o,colors:a,settings:l=Os,plugins:h=[]}){var c;const d=[],{headers:{waterfall:f="waterfall",flameChart:v="flame chart"}={}}=l,u=(c=l==null?void 0:l.styles)!==null&&c!==void 0?c:{},b=new _s({styles:u==null?void 0:u.timeGridPlugin});d.push(b);let y,m,g,w,F;o&&(F=new Is({data:o,settings:{styles:u==null?void 0:u.timeseriesPlugin}}),d.push(F)),s&&(y=new Ms({data:s}),y.on("select",R=>this.emit("select",R)),d.push(y)),n&&(m=new Fs({data:n,settings:{styles:u==null?void 0:u.waterfallPlugin}}),m.on("select",R=>this.emit("select",R)),i&&d.push(new nt(f,{styles:u==null?void 0:u.togglePlugin})),d.push(m)),i&&(w=new Rs({data:i,colors:a}),w.on("select",R=>this.emit("select",R)),n&&d.push(new nt(v,{styles:u==null?void 0:u.togglePlugin})),d.push(w)),(i||n||r)&&(g=new Hs({flameChartNodes:i,waterfall:n,timeseries:r,settings:{styles:u==null?void 0:u.timeframeSelectorPlugin}}),d.unshift(g)),super({canvas:e,settings:l,plugins:[...d,...h]}),w&&g&&(this.setNodes=R=>{w&&w.setData(R),g&&g.setFlameChartNodes(R)},this.setFlameChartPosition=({x:R,y:le})=>{typeof R=="number"&&this.renderEngine.setPositionX(R),typeof le=="number"&&w&&w.setPositionY(le),this.renderEngine.render()}),y&&(this.setMarks=R=>{y&&y.setMarks(R)}),m&&(this.setWaterfall=R=>{m&&m.setData(R),g&&g.setWaterfall(R)}),F&&(this.setTimeseries=R=>{F&&F.setData(R)}),g&&(this.setTimeframeTimeseries=R=>{g==null||g.setTimeseries(R)})}}const Us=(t,e)=>{let i=[];const s={};return Object.values(t).forEach(n=>{var h;const r=n.caller,o=n.callee,a=(n.cost[String(e)]||0)>0?n.cost[String(e)]/1e3:0,l=0;if(o&&!s[o]&&(s[o]={name:o,start:l,duration:a,cost:n.cost,children:[]}),r&&!s[r]&&(s[r]={name:r,start:l,duration:a,cost:n.cost,children:[]}),!(!r||i.includes(o))){if(s[r]&&s[r].children){const c=s[r].children||[],d=c?c[c.length-1]:null;s[o].start=d?d.start+d.duration:s[o].start}else s[o].start+=s[r].start;(h=s[r].children)==null||h.push(s[o]),i.push(o)}}),i=[],s["main()"]},Gs=()=>({build:Us}),Bs=Z({__name:"flame-graph",props:{edges:{}},emits:["hover","hide"],setup(t,{emit:e}){const i=t,s=H(),n=H(),{build:r}=Gs(),o=()=>{if(!n.value||!s.value)return;const{width:a,height:l}=n.value.getBoundingClientRect();s.value.width=a||1,s.value.height=l||1;const h=new Ns({canvas:s.value,data:[r(i.edges,T.CPU)],settings:{styles:{main:{blockHeight:20}},options:{tooltip:(c,d,f)=>{c===null?e("hide"):e("hover",{callee:c.data.source.name,caller:"",cost:c.data.source.cost,position:{x:(f==null?void 0:f.x)||0,y:(f==null?void 0:f.y)||0}})}}}});h.render(),window.addEventListener("resize",$t(()=>{if(!n.value)return;const{width:c,height:d}=n.value.getBoundingClientRect();h.resize(c,d)},30))};return We(()=>{Vt(()=>{o()})}),(a,l)=>(S(),$("div",{ref_key:"graph",ref:n,class:"flame-graph"},[E("canvas",{ref_key:"canvas",ref:s,class:"flame-graph__canvas"},null,512)],512))}});const Vs=B(Bs,[["__scopeId","data-v-422844de"]]),Ks=t=>(ct("data-v-dacbe865"),t=t(),dt(),t),Qs={class:"profiler-page"},qs=Ks(()=>E("div",{class:"profiler-page__head"},null,-1)),Zs={class:"profiler-page__main"},js={ref:"calls",class:"profiler-page__callstack"},Js={ref:"info",class:"profiler-page__stat"},en={class:"profiler-page__stat-board"},tn={class:"profiler-page__stat-tabs"},sn=Z({__name:"profiler-page",props:{event:{}},setup(t){const e={x:0,y:0},i=H(),s=H(""),n=H(e),r=V(()=>{let c=n.value.y,d=n.value.x;if(750+n.value.x>window.innerWidth-80){const f=750+n.value.x-window.innerWidth+100;d-=f}return 150+n.value.y>window.innerHeight&&(c=n.value.y-150),{top:`${c+10}px`,left:`${d}px`,width:"750px"}}),o=l=>{if(l){const{position:h,...c}=l||{};i.value=c,n.value=h}else i.value=null,n.value=e},a=l=>{s.value=l.tab.name};return(l,h)=>(S(),$("div",Qs,[qs,E("main",Zs,[E("section",js,[L(x(Qi),{style:oe({height:"calc(100vh - 48px)"})},{default:z(()=>[L(x(_i),{payload:l.event.payload,onHover:o,onHide:o},null,8,["payload"])]),_:1},8,["style"])],512),E("div",Js,[E("section",en,[L(x(ut),{cost:l.event.payload.peaks},null,8,["cost"])]),E("section",tn,[L(x(ei),{options:{useUrlFragment:!1},onChanged:a},{default:z(()=>[L(x(Ue),{name:"Call graph"},{default:z(()=>[s.value==="Call graph"?(S(),re(x(Yi),{key:0,payload:l.event.payload},null,8,["payload"])):Q("",!0)]),_:1}),L(x(Ue),{name:"Flamechart"},{default:z(()=>[s.value==="Flamechart"?(S(),re(x(Vs),{key:s.value,"data-key":s.value,edges:l.event.payload.edges,onHover:o,onHide:o},null,8,["data-key","edges"])):Q("",!0)]),_:1})]),_:1})])],512),i.value?(S(),re(x(ft),{key:0,class:"profiler-page__hover-edge",edge:i.value,style:oe(r.value)},null,8,["edge","style"])):Q("",!0)])]))}});const nn=B(sn,[["__scopeId","data-v-dacbe865"]]),{normalizeProfilerEvent:rn}=Jt(),on=Z({components:{ProfilerPage:nn,PageHeader:jt},async setup(){const t=Kt(),e=Qt(),i=t.params.id;{const{$events:s}=qt(),{data:n,pending:r}=await Zt(s.getUrl(i),{onResponse({response:o}){return o.data},onResponseError(){e.push("/404")},onRequestError(){e.push("/404")}},"$QtIRZfGdYG");return{serverEvent:n,pending:r,eventId:i,clearEvent:()=>s.removeById(i)}}},head(){return{title:`Profiler > ${this.eventId} | Buggregator`}},computed:{event(){return this.serverEvent?rn(this.serverEvent):null}},methods:{onDelete(){this.clearEvent(),this.$router.push("/")}}});const Ie=t=>(ct("data-v-517f9806"),t=t(),dt(),t),an={class:"profiler-event"},ln={key:0,class:"profiler-event__loading"},hn=Ie(()=>E("div",null,null,-1)),cn=Ie(()=>E("div",null,null,-1)),dn=Ie(()=>E("div",null,null,-1)),un=[hn,cn,dn],gn={class:"profiler-event__body"};function fn(t,e,i,s,n,r){const o=It,a=Ne("PageHeader"),l=Ne("ProfilerPage");return S(),$("main",an,[L(a,{class:"profiler-event__head","button-title":"Delete event",onDelete:t.onDelete},{default:z(()=>[L(o,{to:"/"},{default:z(()=>[I("Home")]),_:1}),I("/ "),L(o,{to:"/profiler"},{default:z(()=>[I("Profiler")]),_:1}),I("/ "),L(o,{disabled:!0},{default:z(()=>[I(j(t.eventId),1)]),_:1})]),_:1},8,["onDelete"]),t.pending&&!t.event?(S(),$("div",ln,un)):Q("",!0),E("div",gn,[t.event?(S(),re(l,{key:0,event:t.event},null,8,["event"])):Q("",!0)])])}const Cn=B(on,[["render",fn],["__scopeId","data-v-517f9806"]]);export{Cn as default};
