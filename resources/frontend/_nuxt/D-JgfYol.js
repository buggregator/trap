import{_ as A,u as Q,C as H,c as Pe,V as ke}from"./BdYR1MGi.js";import{P as Ce,u as Te}from"./C_H-m1dF.js";import{d as E,c as _,o as l,a as f,b as p,F as U,r as B,t as $,g as w,f as m,u,_ as k,s as M,h as b,w as y,l as V,O as Re,m as Le,B as Ie,R as xe,e as N,I as ue,H as De,p as Oe,i as Ue,J as Ve,a2 as Ae}from"./BFT9qVMJ.js";import{I as R,E as x,h as de,d as te,p as Be,u as Me,P as ne}from"./BmkTCIb-.js";import{B as Fe}from"./26BCkcnP.js";import{u as ze}from"./tA-419Ti.js";import{I as He,u as Ne}from"./CwG9ELm3.js";import{u as je}from"./DnpK2bYY.js";import{S as qe,u as We}from"./CBY0Nbvu.js";import{u as Ge}from"./DHfIEqZc.js";import{S as Je,u as Ye}from"./B7d548lV.js";import{u as Ke}from"./wd-3U9fd.js";import{u as Xe}from"./Qmj6dFK8.js";function Qe(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),s=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(s),t&&(n.href=t),s.href=e,s.href}const Ze=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function D(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}function j(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function et(e){const t=j(e,"border-left-width"),r=j(e,"border-right-width");return e.clientWidth+t+r}function tt(e){const t=j(e,"border-top-width"),r=j(e,"border-bottom-width");return e.clientHeight+t+r}function pe(e,t={}){const r=t.width||et(e),n=t.height||tt(e);return{width:r,height:n}}function nt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const C=16384;function rt(e){(e.width>C||e.height>C)&&(e.width>C&&e.height>C?e.width>e.height?(e.height*=C/e.width,e.width=C):(e.width*=C/e.height,e.height=C):e.width>C?(e.height*=C/e.width,e.width=C):(e.width*=C/e.height,e.height=C))}function st(e,t={}){return e.toBlob?new Promise(r=>{e.toBlob(r,t.type?t.type:"image/png",t.quality?t.quality:1)}):new Promise(r=>{const n=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),s=n.length,a=new Uint8Array(s);for(let o=0;o<s;o+=1)a[o]=n.charCodeAt(o);r(new Blob([a],{type:t.type?t.type:"image/png"}))})}function q(e){return new Promise((t,r)=>{const n=new Image;n.decode=()=>t(n),n.onload=()=>t(n),n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function at(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ot(e,t,r){const n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject");return s.setAttribute("width",`${t}`),s.setAttribute("height",`${r}`),s.setAttribute("viewBox",`0 0 ${t} ${r}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(e),at(s)}const P=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||P(r,t)};function it(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function ct(e){return D(e).map(t=>{const r=e.getPropertyValue(t),n=e.getPropertyPriority(t);return`${t}: ${r}${n?" !important":""};`}).join(" ")}function lt(e,t,r){const n=`.${e}:${t}`,s=r.cssText?it(r):ct(r);return document.createTextNode(`${n}{${s}}`)}function re(e,t,r){const n=window.getComputedStyle(e,r),s=n.getPropertyValue("content");if(s===""||s==="none")return;const a=Ze();try{t.className=`${t.className} ${a}`}catch{return}const o=document.createElement("style");o.appendChild(lt(a,r,n)),t.appendChild(o)}function ut(e,t){re(e,t,":before"),re(e,t,":after")}const se="application/font-woff",ae="image/jpeg",dt={woff:se,woff2:se,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ae,jpeg:ae,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function pt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Z(e){const t=pt(e).toLowerCase();return dt[t]||""}function vt(e){return e.split(/,/)[1]}function X(e){return e.search(/^(data:)/)!==-1}function ve(e,t){return`data:${t};base64,${e}`}async function fe(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const s=await n.blob();return new Promise((a,o)=>{const i=new FileReader;i.onerror=o,i.onloadend=()=>{try{a(r({res:n,result:i.result}))}catch(c){o(c)}},i.readAsDataURL(s)})}const K={};function ft(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function ee(e,t,r){const n=ft(e,t,r.includeQueryParams);if(K[n]!=null)return K[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let s;try{const a=await fe(e,r.fetchRequestInit,({res:o,result:i})=>(t||(t=o.headers.get("Content-Type")||""),vt(i)));s=ve(a,t)}catch(a){s=r.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;a&&(o=typeof a=="string"?a:a.message),o&&console.warn(o)}return K[n]=s,s}async function mt(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):q(t)}async function _t(e,t){if(e.currentSrc){const a=document.createElement("canvas"),o=a.getContext("2d");a.width=e.clientWidth,a.height=e.clientHeight,o==null||o.drawImage(e,0,0,a.width,a.height);const i=a.toDataURL();return q(i)}const r=e.poster,n=Z(r),s=await ee(r,n,t);return q(s)}async function ht(e){var t;try{if(!((t=e==null?void 0:e.contentDocument)===null||t===void 0)&&t.body)return await G(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}async function gt(e,t){return P(e,HTMLCanvasElement)?mt(e):P(e,HTMLVideoElement)?_t(e,t):P(e,HTMLIFrameElement)?ht(e):e.cloneNode(!1)}const wt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function yt(e,t,r){var n,s;let a=[];return wt(e)&&e.assignedNodes?a=D(e.assignedNodes()):P(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?a=D(e.contentDocument.body.childNodes):a=D(((s=e.shadowRoot)!==null&&s!==void 0?s:e).childNodes),a.length===0||P(e,HTMLVideoElement)||await a.reduce((o,i)=>o.then(()=>G(i,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function bt(e,t){const r=t.style;if(!r)return;const n=window.getComputedStyle(e);n.cssText?(r.cssText=n.cssText,r.transformOrigin=n.transformOrigin):D(n).forEach(s=>{let a=n.getPropertyValue(s);s==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),P(e,HTMLIFrameElement)&&s==="display"&&a==="inline"&&(a="block"),s==="d"&&t.getAttribute("d")&&(a=`path(${t.getAttribute("d")})`),r.setProperty(s,a,n.getPropertyPriority(s))})}function Et(e,t){P(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),P(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function St(e,t){if(P(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(s=>e.value===s.getAttribute("value"));n&&n.setAttribute("selected","")}}function $t(e,t){return P(t,Element)&&(bt(e,t),ut(e,t),Et(e,t),St(e,t)),t}async function Pt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let a=0;a<r.length;a++){const i=r[a].getAttribute("xlink:href");if(i){const c=e.querySelector(i),v=document.querySelector(i);!c&&v&&!n[i]&&(n[i]=await G(v,t,!0))}}const s=Object.values(n);if(s.length){const a="http://www.w3.org/1999/xhtml",o=document.createElementNS(a,"svg");o.setAttribute("xmlns",a),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const i=document.createElementNS(a,"defs");o.appendChild(i);for(let c=0;c<s.length;c++)i.appendChild(s[c]);e.appendChild(o)}return e}async function G(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>gt(n,t)).then(n=>yt(e,n,t)).then(n=>$t(e,n)).then(n=>Pt(n,t))}const me=/url\((['"]?)([^'"]+?)\1\)/g,kt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ct=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Tt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Rt(e){const t=[];return e.replace(me,(r,n,s)=>(t.push(s),r)),t.filter(r=>!X(r))}async function Lt(e,t,r,n,s){try{const a=r?Qe(t,r):t,o=Z(t);let i;if(s){const c=await s(a);i=ve(c,o)}else i=await ee(a,o,n);return e.replace(Tt(t),`$1${i}$3`)}catch{}return e}function It(e,{preferredFontFormat:t}){return t?e.replace(Ct,r=>{for(;;){const[n,,s]=kt.exec(r)||[];if(!s)return"";if(s===t)return`src: ${n};`}}):e}function _e(e){return e.search(me)!==-1}async function he(e,t,r){if(!_e(e))return e;const n=It(e,r);return Rt(n).reduce((a,o)=>a.then(i=>Lt(i,o,t,r)),Promise.resolve(n))}async function z(e,t,r){var n;const s=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(s){const a=await he(s,null,r);return t.style.setProperty(e,a,t.style.getPropertyPriority(e)),!0}return!1}async function xt(e,t){await z("background",e,t)||await z("background-image",e,t),await z("mask",e,t)||await z("mask-image",e,t)}async function Dt(e,t){const r=P(e,HTMLImageElement);if(!(r&&!X(e.src))&&!(P(e,SVGImageElement)&&!X(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,s=await ee(n,Z(n),t);await new Promise((a,o)=>{e.onload=a,e.onerror=o;const i=e;i.decode&&(i.decode=a),i.loading==="lazy"&&(i.loading="eager"),r?(e.srcset="",e.src=s):e.href.baseVal=s})}async function Ot(e,t){const n=D(e.childNodes).map(s=>ge(s,t));await Promise.all(n).then(()=>e)}async function ge(e,t){P(e,Element)&&(await xt(e,t),await Dt(e,t),await Ot(e,t))}function Ut(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(s=>{r[s]=n[s]}),e}const oe={};async function ie(e){let t=oe[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},oe[e]=t,t}async function ce(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,a=(r.match(/url\([^)]+\)/g)||[]).map(async o=>{let i=o.replace(n,"$1");return i.startsWith("https://")||(i=new URL(i,e.url).href),fe(i,t.fetchRequestInit,({result:c})=>(r=r.replace(o,`url(${c})`),[o,c]))});return Promise.all(a).then(()=>r)}function le(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=s.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",i=new RegExp(o,"gi");for(;;){let c=a.exec(n);if(c===null){if(c=i.exec(n),c===null)break;a.lastIndex=i.lastIndex}else i.lastIndex=a.lastIndex;t.push(c[0])}return t}async function Vt(e,t){const r=[],n=[];return e.forEach(s=>{if("cssRules"in s)try{D(s.cssRules||[]).forEach((a,o)=>{if(a.type===CSSRule.IMPORT_RULE){let i=o+1;const c=a.href,v=ie(c).then(h=>ce(h,t)).then(h=>le(h).forEach(T=>{try{s.insertRule(T,T.startsWith("@import")?i+=1:s.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:T,error:g})}})).catch(h=>{console.error("Error loading remote css",h.toString())});n.push(v)}})}catch(a){const o=e.find(i=>i.href==null)||document.styleSheets[0];s.href!=null&&n.push(ie(s.href).then(i=>ce(i,t)).then(i=>le(i).forEach(c=>{o.insertRule(c,s.cssRules.length)})).catch(i=>{console.error("Error loading remote stylesheet",i)})),console.error("Error inlining remote css file",a)}}),Promise.all(n).then(()=>(e.forEach(s=>{if("cssRules"in s)try{D(s.cssRules||[]).forEach(a=>{r.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),r))}function At(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>_e(t.style.getPropertyValue("src")))}async function Bt(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=D(e.ownerDocument.styleSheets),n=await Vt(r,t);return At(n)}async function Mt(e,t){const r=await Bt(e,t);return(await Promise.all(r.map(s=>{const a=s.parentStyleSheet?s.parentStyleSheet.href:null;return he(s.cssText,a,t)}))).join(`
`)}async function Ft(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Mt(e,t);if(r){const n=document.createElement("style"),s=document.createTextNode(r);n.appendChild(s),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function zt(e,t={}){const{width:r,height:n}=pe(e,t),s=await G(e,t,!0);return await Ft(s,t),await ge(s,t),Ut(s,t),await ot(s,r,n)}async function we(e,t={}){const{width:r,height:n}=pe(e,t),s=await zt(e,t),a=await q(s),o=document.createElement("canvas"),i=o.getContext("2d"),c=t.pixelRatio||nt(),v=t.canvasWidth||r,h=t.canvasHeight||n;return o.width=v*c,o.height=h*c,t.skipAutoScale||rt(o),o.style.width=`${v}`,o.style.height=`${h}`,t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,o.width,o.height)),i.drawImage(a,0,0,o.width,o.height),o}async function Ht(e,t={}){return(await we(e,t)).toDataURL()}async function Nt(e,t={}){const r=await we(e,t);return await st(r)}const jt={class:"preview-card-footer"},qt={class:"preview-card-footer__tags"},Wt={class:"preview-card-footer__tag-key"},Gt={class:"preview-card-footer__tag-value"},Jt={key:0,class:"preview-card-footer__host"},Yt={class:"preview-card-footer__host-name"},Kt=E({__name:"preview-card-footer",props:{serverName:{default:""},originConfig:{default:null}},setup(e){const t={php_version:"php",laravel_version:"laravel",symfony_version:"symfony",line_number:"line",hostname:"host",environment:"env"},r=e,n=_(()=>Object.entries(r.originConfig||{}).reduce((s,[a,o])=>{var v;const i=((v=r.originConfig)==null?void 0:v.file)||"";if(a==="name"&&i.includes(o,i.length-o.length)||!o||o==="undefined")return s;const c=t[a]||a;return s[c]=o,s},{}));return(s,a)=>(l(),f("div",jt,[p("div",qt,[n.value?(l(!0),f(U,{key:0},B(n.value,(o,i)=>(l(),f("div",{key:i,class:"preview-card-footer__tag"},[p("span",Wt,$(i)+":",1),p("span",Gt,$(o),1)]))),128)):w("",!0)]),s.serverName?(l(),f("div",Jt,[m(u(R),{name:"host",class:"preview-card-footer__host-icon"}),p("span",Yt,$(s.serverName),1)])):w("",!0)]))}}),Xt=k(Kt,[["__scopeId","data-v-52f64421"]]);var W=(e=>(e.File="file",e.Image="image",e))(W||{});const Qt={class:"preview-card-header"},Zt={class:"preview-card-header__tags"},en=["href"],tn={key:0,class:"preview-card-header__buttons"},nn={key:0,class:"preview-card-header__buttons-expand"},rn={class:"preview-card-header__buttons-expand-list"},sn=["disabled"],an=E({__name:"preview-card-header",props:{eventType:{},eventId:{},eventUrl:{default:""},tags:{default:()=>[]},isOpen:{type:Boolean},isLocked:{type:Boolean},isVisibleControls:{type:Boolean}},emits:["delete","toggleView","copy","download","lock"],setup(e,{emit:t}){const r=e,n=t,s=()=>{n("toggleView",!0)},a=()=>{n("delete",!0)},o=()=>{n("copy",!0)},i=()=>{n("download",W.Image)},c=()=>{n("download",W.File)},v=()=>{n("lock",!0)},h=_(()=>r.tags.length>0),T=_(()=>Object.values(x).includes(r.eventType)?`/${r.eventType}/${r.eventId}`:"");return(g,S)=>{const I=A;return l(),f("div",Qt,[p("div",Zt,[g.eventUrl?(l(),f("a",{key:0,href:g.eventUrl,target:"_blank",class:"preview-card-header__tag preview-card-header__tag--json",title:"Open JSON payload for this event in new tab"}," JSON ",8,en)):w("",!0),h.value?(l(!0),f(U,{key:1},B(g.tags,L=>(l(),f("div",{key:L,ref_for:!0,ref:"tags",class:M(["preview-card-header__tag",`preview-card-header__tag--${g.eventType}`])},$(L),3))),128)):w("",!0),T.value?(l(),b(I,{key:2,to:T.value,class:"preview-card-header__open",title:"Open full event"},{default:y(()=>[m(u(R),{name:"window-maximize"})]),_:1},8,["to"])):w("",!0)]),g.isVisibleControls?(l(),f("div",tn,[g.isOpen?(l(),f("div",nn,[p("button",{class:"preview-card-header__button preview-card-header__button--copy",title:"Copy event as PNG image to clipboard",onClick:o},[m(u(R),{name:"copy",class:"preview-card-header__button-icon"})]),p("div",rn,[p("button",{class:"preview-card-header__button preview-card-header__button--copy",title:"Download event as JSON file",onClick:c},[m(u(R),{name:"file-download",class:"preview-card-header__button-icon"})]),p("button",{class:"preview-card-header__button preview-card-header__button--copy",title:"Download event as PNG image",onClick:i},[m(u(R),{name:"image-download",class:"preview-card-header__button-icon"})])])])):w("",!0),p("button",{class:M(["preview-card-header__button preview-card-header__button--collapse",{"preview-card-header__button--collapse-closed":!g.isOpen}]),title:"Collapse event",onClick:s},[g.isOpen?(l(),b(u(R),{key:0,name:"minus",class:"preview-card-header__button-icon"})):w("",!0),g.isOpen?w("",!0):(l(),b(u(R),{key:1,name:"plus",class:"preview-card-header__button-icon"}))],2),p("button",{class:M(["preview-card-header__button preview-card-header__button--lock",{"preview-card-header__button--locked":g.isLocked}]),title:"Lock event. Locked events will not be deleted",onClick:v},[m(u(R),{name:"lock",class:"preview-card-header__button-icon"})],2),p("button",{class:"preview-card-header__button preview-card-header__button--delete",title:"Delete event",disabled:g.isLocked,onClick:a},[m(u(R),{name:"times",class:"preview-card-header__button-icon"})],8,sn)])):w("",!0)])}}}),on=k(an,[["__scopeId","data-v-e6c29624"]]),cn=["id"],ln={class:"preview-card__in"},un={key:0,ref:"event_body",class:"preview-card__body"},dn=E({__name:"preview-card",props:{event:{}},setup(e){const t=e,r=V(!1),n=V(!1),s=V(!1),a=V(!0),o=V(null),i=V(!1),c=V(!0),{events:v,lockedIds:h}=Q(),T=_(()=>[de(t.event.date).format("HH:mm:ss"),...t.event.labels]),g=_(()=>{const d=Object.entries(t.event.origin||{}).map(([J,Y])=>[J,String(Y)]).filter(([J,Y])=>!!Y);return d.length>0?Object.fromEntries(d):null}),S=_(()=>`${xe}/api/event/${t.event.id}`),I=d=>{r.value=!r.value,d.preventDefault()},L=(d=!0)=>{a.value=d},F=()=>{i.value=!0,setTimeout(()=>{v==null||v.removeById(t.event.id)},200)},ye=()=>{((h==null?void 0:h.items.value)||[]).includes(t.event.id)?(h==null||h.remove(t.event.id),n.value=!1):(h==null||h.add(t.event.id),n.value=!0)},be=()=>{L(!1),o.value&&Ht(o.value).then(d=>{te(d,`${t.event.type}-${t.event.id}.png`)}).catch(d=>console.error(d)).finally(()=>{L(!0)})},Ee=async()=>{try{const d=await(v==null?void 0:v.getItem(t.event.id));d&&te(JSON.stringify(d,null,2),`${t.event.type}-${t.event.id}.json`,"application/json")}catch(d){console.error(d)}},Se=d=>{d===W.Image?be():Ee()},$e=()=>{L(!1),o.value&&Nt(o.value).then(d=>{d&&navigator.clipboard.write([new ClipboardItem({[d.type]:d})])}).catch(d=>console.error(d)).finally(()=>{L(!0)})};return Re(()=>{n.value=h.items.value.includes(t.event.id),c.value=!1}),Le(()=>{setTimeout(()=>{c.value=!0},200)}),(d,J)=>(l(),f("div",{id:d.event.id,ref_key:"eventRef",ref:o,class:M(["preview-card",{"preview-card--initialized":c.value&&!i.value}])},[p("div",ln,[m(on,{class:"preview-card__header","event-url":S.value,"event-type":d.event.type,"event-id":d.event.id,tags:T.value,"is-open":!r.value&&!s.value,"is-locked":n.value,"is-visible-controls":a.value&&!s.value,onToggleView:I,onDelete:F,onCopy:$e,onDownload:Se,onLock:ye,onDblclick:I},null,8,["event-url","event-type","event-id","tags","is-open","is-locked","is-visible-controls"]),!r.value&&!s.value?(l(),f("div",un,[Ie(d.$slots,"default",{},void 0,!0)],512)):w("",!0),!r.value&&!s.value&&(g.value||d.event.serverName)?(l(),b(Xt,{key:1,class:"preview-card__footer","server-name":d.event.serverName,"origin-config":g.value},null,8,["server-name","origin-config"])):w("",!0)])],10,cn))}}),O=k(dn,[["__scopeId","data-v-d023c017"]]),pn=["disabled"],vn=["title"],fn=E({__name:"pause-button",props:{disabledPause:{type:Boolean},isPaused:{type:Boolean},totalNewEventsCount:{}},emits:["toggleUpdate"],setup(e,{emit:t}){const r=t,n=e,s=_(()=>Be("new event",n.totalNewEventsCount,!0)),a=()=>{r("toggleUpdate",!0)};return(o,i)=>(l(),f("button",{class:M(["pause-button",{"pause-button--active":o.isPaused}]),disabled:!o.isPaused&&o.disabledPause,onClick:a},[m(u(R),{name:o.isPaused?"bolt-slash":"bolt",class:"pause-button__icon"},null,8,["name"]),p("span",null,$(o.isPaused?"Paused":"Listening"),1),o.isPaused&&o.totalNewEventsCount?(l(),f("span",{key:0,class:"pause-button__count",title:s.value},$(o.totalNewEventsCount),9,vn)):w("",!0)],10,pn))}}),mn=k(fn,[["__scopeId","data-v-e5a2d859"]]),_n={class:"preview-card__content"},hn={class:"preview-card__method"},gn={class:"preview-card__uri"},wn=E({__name:"preview-card",props:{event:{}},setup(e){const r=decodeURI(e.event.payload.request.uri);return(n,s)=>(l(),b(u(O),{class:"preview-card",event:n.event},{default:y(()=>[p("div",_n,[p("span",hn,$(n.event.payload.request.method),1),N(": "),p("span",gn,"/"+$(u(r)),1)])]),_:1},8,["event"]))}}),yn=k(wn,[["__scopeId","data-v-63064e45"]]),bn=E({__name:"preview-card",props:{event:{}},setup(e){const t=e,r=_(()=>`/inspector/${t.event.id}`);return(n,s)=>{const a=A;return l(),b(u(O),{class:"preview-card",event:n.event},{default:y(()=>[m(a,{to:r.value,class:"preview-card__link"},{default:y(()=>[m(He,{transaction:n.event.payload[0]},null,8,["transaction"])]),_:1},8,["to"])]),_:1},8,["event"])}}}),En=k(bn,[["__scopeId","data-v-85b50874"]]),Sn=E({__name:"preview-card",props:{event:{}},setup(e){return(t,r)=>(l(),b(u(O),{class:"preview-card",event:t.event},{default:y(()=>[m(u(H),{class:"preview-card__snippet",code:t.event.payload.message},null,8,["code"]),t.event.payload.context?(l(),b(u(H),{key:0,class:"preview-card__snippet",language:"json",code:t.event.payload.context},null,8,["code"])):w("",!0),(l(!0),f(U,null,B(t.event.payload.extra,(n,s)=>(l(),b(u(H),{key:s,class:"preview-card__snippet",code:{[s]:n}},null,8,["code"]))),128))]),_:1},8,["event"]))}}),$n=k(Sn,[["__scopeId","data-v-24595d4b"]]),Pn=E({__name:"preview-card",props:{event:{}},setup(e){const t=e,r=_(()=>`/profiler/${t.event.id}`);return(n,s)=>{const a=A;return l(),b(u(O),{class:"preview-card",event:n.event},{default:y(()=>[m(a,{tag:"div",to:r.value,class:"preview-card__link"},{default:y(()=>[m(u(qe),{cost:n.event.payload.peaks},null,8,["cost"])]),_:1},8,["to"])]),_:1},8,["event"])}}}),kn=k(Pn,[["__scopeId","data-v-183ed0c3"]]),Cn={key:0},Tn=E({__name:"preview-card",props:{event:{}},setup(e){const t=e,r=_(()=>{const{meta:a,...o}=t.event;return o}),n=_(()=>[`text-${t.event.meta.size}`,`text-${t.event.meta.color}-500`]),s=a=>Pe[a];return(a,o)=>(l(),b(u(O),{class:"ray-dump-preview",event:r.value},{default:y(()=>[(l(!0),f(U,null,B(a.event.payload.payloads,i=>(l(),f(U,{key:`${i.type}-${i.origin?i.origin.line_number:""}`},[i.type&&s(i.type)?(l(),f("div",Cn,[(l(),b(ue(s(i.type).view),De({ref_for:!0},{...s(i.type).getProps(i)},{class:n.value}),null,16,["class"]))])):w("",!0)],64))),128))]),_:1},8,["event"]))}}),Rn={class:"preview-card__title"},Ln=["innerHTML"],In={key:1},xn={class:"preview-card__content"},Dn=["innerHTML"],On=E({__name:"preview-card",props:{event:{},maxFrames:{default:3}},setup(e){const t=e,r=_(()=>`/sentry/${t.event.id}`),n=_(()=>{var i,c,v;return((v=(c=(i=t.event)==null?void 0:i.payload)==null?void 0:c.exception)==null?void 0:v.values)||[]}),s=_(()=>n.value.length>0),a=_(()=>{var i;return((i=t.event.payload)==null?void 0:i.message)||""}),o=_(()=>n.value.length>0?n.value[0]:{type:"Unknown",value:"Something went wrong",stacktrace:{frames:[]}});return(i,c)=>{const v=A;return l(),b(u(O),{class:"preview-card",event:i.event},{default:y(()=>[s.value?(l(),b(u(Je),{key:0,exception:o.value,"max-frames":i.maxFrames},{default:y(()=>[m(v,{to:r.value,class:"preview-card__link"},{default:y(()=>[p("h3",Rn,$(o.value.type),1),p("pre",{class:"preview-card__text",innerHTML:o.value.value},null,8,Ln)]),_:1},8,["to"])]),_:1},8,["exception","max-frames"])):w("",!0),a.value?(l(),f("div",In,[p("div",xn,[p("pre",{class:"preview-card__text",innerHTML:a.value},null,8,Dn)])])):w("",!0)]),_:1},8,["event"])}}}),Un=k(On,[["__scopeId","data-v-a95ed477"]]),Vn=e=>(Oe("data-v-818cd8e9"),e=e(),Ue(),e),An={class:"smtp-preview__link-title"},Bn={class:"smtp-preview__link-text"},Mn={key:0},Fn=Vn(()=>p("strong",null,"To:",-1)),zn=E({__name:"preview-card",props:{event:{}},setup(e){const t=e,r=_(()=>`/smtp/${t.event.id}`),n=_(()=>de(t.event.date).fromNow()),s=_(()=>{var a,o,i,c;return((c=(i=(o=(a=t==null?void 0:t.event)==null?void 0:a.payload)==null?void 0:o.to)==null?void 0:i[0])==null?void 0:c.email)||null});return(a,o)=>{const i=A;return l(),b(u(O),{class:"smtp-preview",event:a.event},{default:y(()=>[m(i,{to:r.value,class:"smtp-preview__link"},{default:y(()=>[p("h3",An,$(a.event.payload.subject),1),p("div",Bn,[s.value?(l(),f("span",Mn,[Fn,N(" "+$(s.value),1)])):w("",!0),p("span",null,$(n.value),1)])]),_:1},8,["to"])]),_:1},8,["event"])}}}),Hn=k(zn,[["__scopeId","data-v-818cd8e9"]]),Nn=E({__name:"preview-card",props:{event:{}},setup(e){const t=e,r=_(()=>{var a,o;return String(((o=(a=t.event.payload)==null?void 0:a.payload)==null?void 0:o.value)||"")}),n=_(()=>{var a,o;return String(((o=(a=t.event.payload)==null?void 0:a.payload)==null?void 0:o.type)||"string")}),s=_(()=>{var a,o;return String(((o=(a=t.event.payload)==null?void 0:a.payload)==null?void 0:o.language)||"plaintext")});return(a,o)=>(l(),b(u(O),{class:"preview-card",event:a.event},{default:y(()=>[m(u(ke),{value:r.value,type:n.value,language:s.value},null,8,["value","type","language"])]),_:1},8,["event"]))}}),jn=k(Nn,[["__scopeId","data-v-f0ee817d"]]),qn=E({__name:"preview-card-default",props:{event:{}},setup(e){return(t,r)=>(l(),b(u(O),{class:"event-card-fallback",event:t.event},{default:y(()=>[m(u(H),{class:"event-card-fallback__snippet",code:t.event,language:"json"},null,8,["code"])]),_:1},8,["event"]))}}),Wn=k(qn,[["__scopeId","data-v-c2147b95"]]),Gn=E({__name:"event-card",props:{event:{}},setup(e){const{normalizeRayEvent:t}=Ge(),{normalizeProfilerEvent:r}=We(),{normalizeVarDumpEvent:n}=Xe(),{normalizeMonologEvent:s}=je(),{normalizeSentryEvent:a}=Ye(),{normalizeSmtpEvent:o}=Ke(),{normalizeInspectorEvent:i}=Ne(),{normalizeHttpDumpEvent:c}=ze(),{normalizeUnknownEvent:v}=Q(),h=e,T={[x.SENTRY]:{view:Un,normalize:a},[x.MONOLOG]:{view:$n,normalize:s},[x.VAR_DUMP]:{view:jn,normalize:n},[x.RAY_DUMP]:{view:Tn,normalize:t},[x.SMTP]:{view:Hn,normalize:o},[x.PROFILER]:{view:kn,normalize:r},[x.INSPECTOR]:{view:En,normalize:i},[x.HTTP_DUMP]:{view:yn,normalize:c},unknown:{view:Wn,normalize:v}},{view:g,normalize:S}=T[h.event.type];return(I,L)=>(l(),b(ue(u(g)),{event:u(S)(I.event)},null,8,["event"]))}}),Jn={class:"page-placeholder-item"},Yn=["href"],Kn=E({__name:"page-placeholder-item",props:{iconName:{},title:{},linkUrl:{}},setup(e){return(t,r)=>(l(),f("li",Jn,[m(u(R),{name:t.iconName,class:"page-placeholder-item__icon"},null,8,["name"]),p("a",{href:t.linkUrl,class:"page-placeholder-item__link",target:"_blank"},$(t.title),9,Yn)]))}}),Xn=k(Kn,[["__scopeId","data-v-1ff5b0df"]]),Qn={class:"page-placeholder"},Zn={class:"page-placeholder__logo"},er={class:"page-placeholder__list"},tr=E({__name:"page-placeholder",setup(e){const t=[{iconName:"github",title:"Github repository",linkUrl:"https://github.com/buggregator"},{iconName:"docs",title:"Documentation",linkUrl:"https://docs.buggregator.dev"},{iconName:"discord",title:"Join our discord",linkUrl:"https://discord.gg/vDsCD3EKUB"}];return(r,n)=>(l(),f("div",Qn,[p("div",Zn,[m(u(R),{class:"page-placeholder__logo-in",name:"logo"})]),p("ul",er,[(l(),f(U,null,B(t,s=>m(Xn,{key:s.title,"icon-name":s.iconName,title:s.title,"link-url":s.linkUrl},null,8,["icon-name","title","link-url"])),64))])]))}}),nr=k(tr,[["__scopeId","data-v-6c03d8f9"]]),rr={class:"page-layout"},sr=p("span",null," / ",-1),ar={key:0,class:"page-layout__events"},or={key:1,class:"page-layout__welcome"},yr=E({__name:"page-layout",props:{title:{default:""},type:{}},setup(e){const t=e,{events:r,cachedEvents:n,getItemsCount:s}=Q(),{isVisibleEventCounts:a}=Ve(Me()),o=_(()=>{var S;return((S=n.idsByType.value[t.type])==null?void 0:S.length)>0}),i=_(()=>t.type===ne.ALL_EVENTS?r.items.value:r.items.value.filter(({type:S})=>S===t.type)),c=_(()=>o.value?i.value.filter(({uuid:S})=>{var I;return(I=n.idsByType.value[t.type])==null?void 0:I.includes(S)}):i.value),v=_(()=>r.items.value.length-c.value.length),h=()=>t.type===ne.ALL_EVENTS?r.removeAll():r.removeByType(t.type),T=()=>{o.value?n.runUpdatesByType(t.type):n.stopUpdatesByType(t.type)},g=_(()=>s.value(t.type));return Ae(()=>{Te(`${t.title||"Events"}: ${i.value.length} | Buggregator`)}),(S,I)=>{const L=A;return l(),f("div",rr,[m(u(Ce),{class:"page-layout__head"},{controls:y(()=>[m(u(mn),{"disabled-pause":c.value.length===0,"is-paused":o.value,"total-new-events-count":v.value,onToggleUpdate:T},null,8,["disabled-pause","is-paused","total-new-events-count"]),m(u(Fe),{number:g.value,"is-visible":u(a)},{default:y(()=>[p("button",{class:"page-layout__clear-button",onClick:h}," Clear events ")]),_:1},8,["number","is-visible"])]),default:y(()=>[m(L,{to:"/",disabled:!S.title},{default:y(()=>[N("Home")]),_:1},8,["disabled"]),S.title?(l(),f(U,{key:0},[sr,m(L,{disabled:!0},{default:y(()=>[N($(S.title),1)]),_:1})],64)):w("",!0)]),_:1}),c.value.length?(l(),f("main",ar,[(l(!0),f(U,null,B(c.value,F=>(l(),b(u(Gn),{key:F.uuid,event:F,class:"page-layout__event"},null,8,["event"]))),128))])):w("",!0),c.value.length?w("",!0):(l(),f("section",or,[m(u(nr),{class:"page-layout__tips"})]))])}}});export{yr as _};
