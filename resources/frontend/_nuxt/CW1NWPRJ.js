import{d as C,J as w,x as E,c as p,l as N,o as a,a as i,b as n,f as o,w as v,F as W,r as P,u as e,t as V,e as F,g as m,k as M,h as j,s as q,j as z,n as H,_ as A,m as J,B as K,a6 as O}from"./BFT9qVMJ.js";import{E as G,a as f}from"./CsfJzf5f.js";import{u as B,_ as Q,S as U}from"./BdYR1MGi.js";import{a as X,u as T,I as u}from"./BmkTCIb-.js";import{B as Y}from"./26BCkcnP.js";const Z={class:"layout-sidebar"},ee={class:"layout-sidebar__nav"},te={key:0,class:"layout-sidebar__profile"},se={key:0,class:"layout-sidebar__profile-dropdown"},oe={class:"profile-dropdown-item profile-dropdown-item--email"},ae=["src"],ie={class:"layout-sidebar__connection"},ne={class:"layout-sidebar__versions"},le=["title"],re=["title"],ce=C({__name:"layout-sidebar",props:{apiVersion:{},clientVersion:{},profile:{}},setup($){const l=$,d=H(),{isConnectedWS:b}=w(X()),{isVisibleEventCounts:y}=w(T()),h=E(),{getItemsCount:s}=B(),r=p(()=>b.value?"connected":"disconnected"),_=p(()=>{var t;return!l.profile||!((t=l.profile)!=null&&t.avatar)?null:l.profile.avatar.startsWith("<svg")?`data:image/svg+xml;base64,${btoa(l.profile.avatar.replace(/&quot;/g,'"'))}`:l.profile.avatar}),I=p(()=>`WS connection is ${r.value}`),k=N(!0),L=()=>{k.value=!k.value},R=()=>{h.removeToken(),M().push("/login")},x=p(()=>z().path),D=p(()=>{var t,S;return(S=(t=d==null?void 0:d.$appSettings)==null?void 0:t.auth)==null?void 0:S.enabled});return(t,S)=>{const g=Q;return a(),i("aside",Z,[n("nav",ee,[o(g,{to:"/",title:"Dashboard",class:"layout-sidebar__link layout-sidebar__link--logo"},{default:v(()=>[o(e(u),{class:"layout-sidebar__link-icon",name:"logo-short"})]),_:1}),o(g,{to:"/",title:"Events",class:"layout-sidebar__link"},{default:v(()=>[o(e(u),{class:"layout-sidebar__link-icon",name:"events"})]),_:1}),(a(!0),i(W,null,P(e(G),c=>(a(),j(g,{key:c,to:e(f)[c].path,title:e(f)[c].title,class:q(["layout-sidebar__link",{"router-link-active":x.value.includes(e(f)[c].path)}])},{default:v(()=>[o(e(Y),{number:e(s)(e(f)[c].eventType),class:"layout-sidebar__link-badge","is-visible":e(y)},{default:v(()=>[o(e(u),{class:"layout-sidebar__link-icon",name:e(f)[c].iconName},null,8,["name"])]),_:2},1032,["number","is-visible"])]),_:2},1032,["to","title","class"]))),128)),o(g,{to:"/settings",title:"Settings",class:"layout-sidebar__link"},{default:v(()=>[o(e(u),{class:"layout-sidebar__link-icon",name:"settings"})]),_:1})]),n("div",null,[D.value?(a(),i("div",te,[k.value?m("",!0):(a(),i("div",se,[n("div",oe,V(t.profile.email),1),n("div",{class:"profile-dropdown-item profile-dropdown-item--logout",onClick:R},[o(e(u),{class:"profile-dropdown-item--logout-icon",name:"logout"}),F(" Logout ")])])),_.value?(a(),i("div",{key:1,class:"layout-sidebar__profile-avatar",onClick:L},[n("img",{src:_.value},null,8,ae)])):m("",!0)])):m("",!0),n("div",ie,[o(e(u),{class:"layout-sidebar__connection-icon",name:r.value,title:I.value},null,8,["name","title"])]),n("div",ne,[t.apiVersion?(a(),i("div",{key:0,class:"layout-sidebar__nav-version",title:`Api version: ${t.apiVersion}`},V(t.apiVersion),9,le)):m("",!0),t.clientVersion?(a(),i("div",{key:1,class:"layout-sidebar__nav-version",title:`Client version: ${t.clientVersion}`},V(t.clientVersion),9,re)):m("",!0)])])])}}}),ue=A(ce,[["__scopeId","data-v-4f57189e"]]),de={class:"main-layout"},_e={class:"main-layout__content"},pe=C({__name:"default",setup($){T(),U(window.document);const{profile:l}=w(E()),{api:{getVersion:d}}=O(),b=N(""),y=N("@dev"),h=async()=>{const s=await d();b.value=String(s).match(/^[0-9.]+.*$/)?`v${s}`:`@${s}`};return J(()=>{var r,_;h();const{events:s}=B();(_=(r=s==null?void 0:s.items)==null?void 0:r.value)!=null&&_.length||s.getAll()}),(s,r)=>(a(),i("div",de,[o(e(ue),{class:"main-layout__sidebar","api-version":b.value,"client-version":y.value,profile:e(l)},null,8,["api-version","client-version","profile"]),n("div",_e,[K(s.$slots,"default",{},void 0,!0)])]))}}),ye=A(pe,[["__scopeId","data-v-8c9b1ead"]]);export{ye as default};
